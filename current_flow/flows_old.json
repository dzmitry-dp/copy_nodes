[{"id":"87ebfb8f.5c4158","type":"tab","label":"background template","disabled":false,"info":""},{"id":"79af85de.53d17c","type":"tab","label":"timer & language panel","disabled":false,"info":""},{"id":"eb473c2a.1b334","type":"tab","label":"control panel","disabled":false,"info":""},{"id":"ed820623.bf0ea8","type":"tab","label":"main","disabled":false,"info":""},{"id":"c35904a3.a08f28","type":"tab","label":"First room","disabled":false,"info":""},{"id":"aff38e5d.d751b","type":"tab","label":"hints","disabled":false,"info":""},{"id":"a469dc94.42301","type":"tab","label":"debug console","disabled":false,"info":""},{"id":"debfb50c.4861d8","type":"ui_base","theme":{"name":"theme-custom","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#1f4b4d","baseFont":"Lucida Sans Typewriter,Lucida Console,Monaco,monospace","edited":true,"reset":false},"customTheme":{"name":"Vampires","default":"#4B7930","baseColor":"#9d7d53","baseFont":"Courier,monospace","reset":false},"themeState":{"base-color":{"default":"#4B7930","value":"#9d7d53","edited":true},"page-titlebar-backgroundColor":{"value":"#282b2f","edited":true},"page-backgroundColor":{"value":"#303540","edited":true},"page-sidebar-backgroundColor":{"value":"#737373","edited":true},"group-textColor":{"value":"#ffffff","edited":true},"group-borderColor":{"value":"#001452","edited":true},"group-backgroundColor":{"value":"#4d5a6a","edited":true},"widget-textColor":{"value":"#d3e0ee","edited":true},"widget-backgroundColor":{"value":"#541312","edited":true},"widget-borderColor":{"value":"#541313","edited":true},"base-font":{"value":"Courier,monospace"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Cask Cube","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":35,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"ec06c7c7.810958","type":"ui_spacer","name":"spacer","group":"","order":2,"width":3,"height":1},{"id":"e85c2336.19796","type":"ui_spacer","name":"spacer","group":"","order":2,"width":3,"height":1},{"id":"e3d56fa7.f1697","type":"ui_group","z":"","name":"Group 1","tab":"a2baacda.24a17","order":3,"disp":true,"width":6,"collapse":false},{"id":"a2baacda.24a17","type":"ui_tab","z":"","name":"Cask Cube","icon":"fa-bars","order":1,"disabled":false,"hidden":false},{"id":"89e5900e.1cfcc","type":"ui_group","z":"","name":"props control panel","tab":"a2baacda.24a17","order":2,"disp":true,"width":6,"collapse":true},{"id":"29ea5206.410c5e","type":"ui_group","z":"","name":"timer","tab":"a2baacda.24a17","order":1,"disp":true,"width":6,"collapse":true},{"id":"16bf536e.4ac37d","type":"ui_tab","z":"","name":"debug console","icon":"dashboard","order":4,"disabled":false,"hidden":false},{"id":"9512ff54.fab02","type":"ui_group","z":"","name":"sounds","tab":"16bf536e.4ac37d","order":2,"disp":true,"width":5,"collapse":false},{"id":"a595604c.cb85a","type":"ui_group","z":"","name":"light","tab":"16bf536e.4ac37d","order":3,"disp":true,"width":7,"collapse":false},{"id":"ccaf1bf8.8489f8","type":"ui_group","z":"","name":"locks","tab":"16bf536e.4ac37d","order":4,"disp":true,"width":7,"collapse":false},{"id":"98367be2.803378","type":"ui_group","z":"","name":"control","tab":"16bf536e.4ac37d","order":5,"disp":true,"width":"6","collapse":false},{"id":"f7e87146.ea8df","type":"ui_group","z":"","name":"link state","tab":"16bf536e.4ac37d","order":6,"disp":true,"width":8,"collapse":false},{"id":"e473a117.76c52","type":"ui_group","z":"","name":"light brightness","tab":"16bf536e.4ac37d","order":6,"disp":true,"width":6,"collapse":true},{"id":"b7b72d02.5032c","type":"mqtt-broker","z":"","name":"cube USA","broker":"192.168.20.60","port":"1883","clientid":"web_ui_vampires","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"7d295231.3532ec","type":"ui_spacer","name":"spacer","group":"","order":1,"width":2,"height":1},{"id":"768e87d1.8a3d28","type":"ui_spacer","name":"spacer","group":"","order":29,"width":7,"height":1},{"id":"10679ed2.edc101","type":"ui_spacer","name":"spacer","group":"","order":33,"width":7,"height":1},{"id":"fb19a0ea.2e38d","type":"mqtt-broker","z":"","name":"star-gate_mqtt_broker","broker":"192.168.0.60","port":"1883","clientid":"web_ui","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"a210fd84.28e45","type":"ui_group","z":"","name":"Group 2","tab":"a2baacda.24a17","order":4,"disp":true,"width":6,"collapse":false},{"id":"6d7d16f8.08fcd8","type":"ui_spacer","name":"spacer","group":"29ea5206.410c5e","order":3,"width":6,"height":1},{"id":"6c552bad.d24b64","type":"ui_spacer","name":"spacer","group":"29ea5206.410c5e","order":8,"width":6,"height":1},{"id":"a3be4145.893ae","type":"ui_spacer","name":"spacer","group":"29ea5206.410c5e","order":12,"width":6,"height":1},{"id":"823ce49c.2d9668","type":"ui_spacer","name":"spacer","group":"89e5900e.1cfcc","order":1,"width":6,"height":1},{"id":"821f3347.b8edc","type":"ui_spacer","name":"spacer","group":"89e5900e.1cfcc","order":2,"width":6,"height":1},{"id":"96ec252e.08f958","type":"ui_spacer","name":"spacer","group":"89e5900e.1cfcc","order":8,"width":6,"height":1},{"id":"d358218f.83235","type":"ui_spacer","name":"spacer","group":"e3d56fa7.f1697","order":17,"width":6,"height":1},{"id":"46017e08.24af1","type":"ui_spacer","name":"spacer","group":"e3d56fa7.f1697","order":21,"width":6,"height":1},{"id":"b025924b.48e96","type":"ui_spacer","name":"spacer","group":"e3d56fa7.f1697","order":38,"width":6,"height":1},{"id":"8b1b66fa.f4c7a8","type":"ui_spacer","name":"spacer","group":"e3d56fa7.f1697","order":39,"width":6,"height":1},{"id":"fa5f06a.268ccf8","type":"ui_spacer","name":"spacer","group":"e3d56fa7.f1697","order":49,"width":6,"height":1},{"id":"6a47b1de.88827","type":"ui_spacer","name":"spacer","group":"e3d56fa7.f1697","order":55,"width":1,"height":1},{"id":"1012eca.c5b9f13","type":"ui_spacer","name":"spacer","group":"a210fd84.28e45","order":13,"width":6,"height":1},{"id":"7a2f5a23.59b1c4","type":"ui_spacer","name":"spacer","group":"a210fd84.28e45","order":14,"width":1,"height":1},{"id":"beb5978b.790838","type":"ui_spacer","name":"spacer","group":"a210fd84.28e45","order":19,"width":1,"height":1},{"id":"4428182.ac1a0e8","type":"ui_spacer","name":"spacer","group":"a210fd84.28e45","order":24,"width":6,"height":1},{"id":"4d3bb7f0.4cbd78","type":"ui_spacer","name":"spacer","group":"a210fd84.28e45","order":31,"width":6,"height":1},{"id":"304693.9278596e","type":"ui_spacer","name":"spacer","group":"a210fd84.28e45","order":43,"width":6,"height":1},{"id":"fc1bc86c.fc1188","type":"function","z":"79af85de.53d17c","name":"get_date","func":"var date = new Date();\nmsg.payload = ('0'+date.getDate()).slice(-2) + \"/\" + ('0'+(parseInt(date.getMonth(),10) +1 ).toString()).slice(-2) + \"/\" + date.getFullYear();\nreturn msg;","outputs":1,"noerr":0,"x":1060,"y":120,"wires":[["a22b086a.855968"]]},{"id":"b40cc185.11cdb","type":"ui_text","z":"79af85de.53d17c","group":"29ea5206.410c5e","order":2,"width":6,"height":1,"name":"time","label":"time","format":"{{msg.payload}}","layout":"row-spread","x":1230,"y":180,"wires":[],"icon":"node-red-contrib-mytimeout/stopwatch.png"},{"id":"a97cfdc3.2e231","type":"change","z":"79af85de.53d17c","name":"date_src","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":180,"wires":[["37d6f161.4cc56e","fc1bc86c.fc1188"]]},{"id":"ba9e2550.219108","type":"ui_button","z":"79af85de.53d17c","name":"btn_start_timer","group":"98367be2.803378","order":16,"width":0,"height":0,"passthru":true,"label":"{{msg.lang_label}}","tooltip":"","color":"","bgcolor":"","icon":"","payload":"$now()","payloadType":"str","topic":"","x":780,"y":400,"wires":[["234c77df.91c548","e6ee4dd6.3b3eb","a97cfdc3.2e231"]]},{"id":"fa87ba7a.1aeca8","type":"ui_button","z":"79af85de.53d17c","name":"btn_pause_timer","group":"98367be2.803378","order":17,"width":0,"height":0,"passthru":false,"label":"{{msg.lang_label}}","tooltip":"","color":"","bgcolor":"","icon":"","payload":"pause","payloadType":"str","topic":"","x":790,"y":500,"wires":[["fbc0686d.26cb38"]]},{"id":"37d6f161.4cc56e","type":"function","z":"79af85de.53d17c","name":"parse_time","func":"var date = new Date();\nmsg.payload = ('0'+date.getHours()).slice(-2) + \":\" + ('0'+date.getMinutes()).slice(-2) + \":\" + ('0'+date.getSeconds()).slice(-2);\nreturn msg;","outputs":1,"noerr":0,"x":1070,"y":180,"wires":[["b40cc185.11cdb"]]},{"id":"fbc0686d.26cb38","type":"function","z":"79af85de.53d17c","name":"reset_start_flag","func":"var timer_sec = global.get('timer_sec')||0;\nvar timer_min = global.get('timer_min')||0;\nvar timer_hour = global.get('timer_hour')||0;\n\nvar start_timer_flag = global.get('start_timer_flag')||false;\n    \nif(msg.payload == \"pause\")\n{\n    global.set('start_timer_flag', false);\n    msg.start_timer_flag = start_timer_flag;\n    \n    msg.payload = ('0'+timer_hour).slice(-2) + \":\" + ('0'+timer_min).slice(-2) + \":\" + ('0'+timer_sec).slice(-2);\n}\nif(msg.payload == \"reset\")\n{\n    global.set('start_timer_flag', false);\n    msg.start_timer_flag = start_timer_flag;\n    \n    global.set('timer_hour', 0);\n    global.set('timer_min', 0);\n    global.set('timer_sec', 0);\n    \n    timer_sec = global.get('timer_sec');\n    timer_min = global.get('timer_min');\n    timer_hour = global.get('timer_hour');\n    \n    msg.payload = ('0'+timer_hour).slice(-2) + \":\" + ('0'+timer_min).slice(-2) + \":\" + ('0'+timer_sec).slice(-2);\n}\nreturn msg;","outputs":1,"noerr":0,"x":1060,"y":580,"wires":[["4969fa09.a15e54"]]},{"id":"234c77df.91c548","type":"function","z":"79af85de.53d17c","name":"set_start_flag","func":"global.set('start_timer_flag', true);\nreturn msg;","outputs":1,"noerr":0,"x":1060,"y":400,"wires":[[]]},{"id":"6e50cf6e.4b285","type":"comment","z":"79af85de.53d17c","name":"timer","info":"","x":170,"y":280,"wires":[]},{"id":"4969fa09.a15e54","type":"ui_text","z":"79af85de.53d17c","group":"29ea5206.410c5e","order":4,"width":6,"height":2,"name":"timer","label":"","format":"{{msg.payload}}","layout":"col-center","x":1470,"y":580,"wires":[]},{"id":"de517bf2.f268b8","type":"function","z":"79af85de.53d17c","name":"calculate_seconds","func":"var start_timer_flag = global.get('start_timer_flag');\nvar start_time = global.get('start_time')||false;\nvar timer_sec = global.get('timer_sec')||0;\nvar timer_min = global.get('timer_min')||0;\nvar timer_hour = global.get('timer_hour')||0;\n\nvar time = new Date();\n\nif(start_timer_flag === true)\n{\n    if(timer_sec == 59 && timer_min == 59)\n    {\n        timer_hour = timer_hour + 1;\n    }\n    global.set('timer_hour', timer_hour);\n    \n    if(timer_sec == 59)\n    {\n        timer_min = timer_min + 1;\n        if(timer_min > 59){\n           timer_min = 0; \n        }\n    }\n    global.set('timer_min', timer_min);\n    \n    if(time.getSeconds() >= start_time.getSeconds())\n    {\n        timer_sec = time.getSeconds() - start_time.getSeconds();\n    }\n    else\n    {\n        timer_sec = 60 - (start_time.getSeconds() - time.getSeconds());\n    }\n    global.set('timer_sec', timer_sec);\n    \n    msg.payload = ('0'+timer_hour).slice(-2) + \":\" + ('0'+timer_min).slice(-2) + \":\" + ('0'+timer_sec).slice(-2);\n    return msg;\n}","outputs":1,"noerr":0,"x":1270,"y":460,"wires":[["4969fa09.a15e54"]]},{"id":"a22b086a.855968","type":"ui_text","z":"79af85de.53d17c","group":"29ea5206.410c5e","order":1,"width":0,"height":0,"name":"","label":"date","format":"{{msg.payload}}","layout":"row-spread","x":1230,"y":120,"wires":[]},{"id":"64190f5.71795f","type":"inject","z":"79af85de.53d17c","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":250,"y":140,"wires":[["a97cfdc3.2e231"]]},{"id":"e6ee4dd6.3b3eb","type":"function","z":"79af85de.53d17c","name":"store_start_time","func":"var start_time = global.get('start_time')||false;\nstart_time = new Date();\nglobal.set('start_time', start_time);\nreturn msg;","outputs":1,"noerr":0,"x":1060,"y":520,"wires":[[]]},{"id":"8f9968c6.03a448","type":"ui_button","z":"79af85de.53d17c","name":"btn_reset_timer","group":"98367be2.803378","order":18,"width":0,"height":0,"passthru":true,"label":"{{msg.lang_label}}","tooltip":"","color":"","bgcolor":"","icon":"","payload":"reset","payloadType":"str","topic":"","x":780,"y":580,"wires":[["fbc0686d.26cb38"]]},{"id":"7583163a.728c48","type":"ui_button","z":"79af85de.53d17c","name":"","group":"29ea5206.410c5e","order":10,"width":5,"height":1,"passthru":true,"label":"EN","tooltip":"","color":"","bgcolor":"","icon":"","payload":"1011","payloadType":"str","topic":"","x":210,"y":1020,"wires":[["1002a0a8.8a5bef"]]},{"id":"5b3e8342.edc2cc","type":"ui_text","z":"79af85de.53d17c","group":"29ea5206.410c5e","order":9,"width":0,"height":0,"name":"","label":"{{msg.lang_lable}}","format":"","layout":"col-center","x":690,"y":920,"wires":[]},{"id":"a1b7534b.52755","type":"ui_switch","z":"79af85de.53d17c","name":"","label":"en","tooltip":"","group":"29ea5206.410c5e","order":11,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-volume-up","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-volume-off","offcolor":"dimgrey","x":710,"y":1020,"wires":[[]]},{"id":"1002a0a8.8a5bef","type":"function","z":"79af85de.53d17c","name":"lang_code","func":"var lang_code = global.get('lang_code')||1;\n\nif(msg.payload == \"1011\") //EN\n{\n    lang_code = 1;\n    global.set('lang_code', lang_code);\n    msg.lang_code = lang_code;\n}\nelse if(msg.payload == \"1012\") //DE\n{\n    lang_code = 2;\n    global.set('lang_code', lang_code);\n    msg.lang_code = lang_code;\n}\n\nreturn msg;\n","outputs":1,"noerr":0,"x":390,"y":1060,"wires":[["6ffe332a.2876ac"]]},{"id":"eb30d45f.d181b8","type":"comment","z":"79af85de.53d17c","name":"language","info":"","x":160,"y":720,"wires":[]},{"id":"6ffe332a.2876ac","type":"function","z":"79af85de.53d17c","name":"radio_btn","func":"if(msg.lang_code == 1)\n{\n    msg.payload = true;\n}\nelse if (msg.lang_code == 2)\n{\n    msg.payload = false;\n}\nreturn msg;","outputs":1,"noerr":0,"x":560,"y":1060,"wires":[["a1b7534b.52755"]]},{"id":"fcd982f0.31767","type":"function","z":"79af85de.53d17c","name":"lang_start_btn","func":"var if_lang_code = global.get('if_lang_code')||1;\n\nif(if_lang_code == 1) //EN\n{\n    msg.lang_label = \"start\";\n}\nelse if(if_lang_code == 2) //FR\n{\n    msg.lang_label = \"start\";\n}\nreturn msg;","outputs":1,"noerr":0,"x":580,"y":400,"wires":[["ba9e2550.219108"]]},{"id":"ed7fc8fc.c2e148","type":"link out","z":"79af85de.53d17c","name":"lang_code","links":["c9bd15b0.6cf188","8986da88.5f1598","60843ca8.c3f514","cd9e6b58.fd4798","6416eb16.ceecf4","5f66e66c.4e7e28","c33ad833.7a2d78","b15ed33e.98163","57b04b6b.9f5084","3da140f7.cae6","9063a779.eae778","afc09d17.7cbf7","143439fb.85bcd6","68b96fd2.1f319","226ec009.7b3bc","25c93a3b.ec34d6","6d7737e4.7af6c8","4d933061.7fb79"],"x":675,"y":1500,"wires":[]},{"id":"c9bd15b0.6cf188","type":"link in","z":"79af85de.53d17c","name":"lang_code","links":["ed7fc8fc.c2e148"],"x":175,"y":500,"wires":[["fcd982f0.31767","5c10a6f6.714a78","3934ff15.a4e69"]]},{"id":"ef4b0d97.243a","type":"inject","z":"79af85de.53d17c","name":"","topic":"","payload":"lang_code","payloadType":"global","repeat":"","crontab":"","once":true,"onceDelay":"0.1","x":210,"y":380,"wires":[["fcd982f0.31767","5c10a6f6.714a78","3934ff15.a4e69"]]},{"id":"5c10a6f6.714a78","type":"function","z":"79af85de.53d17c","name":"lang_pause_btn","func":"var if_lang_code = global.get('if_lang_code')||1;\n\nif(if_lang_code == 1) //EN\n{\n    msg.lang_label = \"pause\";\n}\nelse if(if_lang_code == 2) //FR\n{\n    msg.lang_label = \"pause\";\n}\nreturn msg;","outputs":1,"noerr":0,"x":580,"y":500,"wires":[["fa87ba7a.1aeca8"]]},{"id":"3934ff15.a4e69","type":"function","z":"79af85de.53d17c","name":"lang_reset_btn","func":"var if_lang_code = global.get('if_lang_code')||1;\n\nif(if_lang_code == 1) //EN\n{\n    msg.lang_label = \"reset\";\n}\nelse if(if_lang_code == 2) //DE\n{\n    msg.lang_label = \"reset\";\n}\nreturn msg;","outputs":1,"noerr":0,"x":580,"y":580,"wires":[["8f9968c6.03a448"]]},{"id":"a8c50b9c.19fcb8","type":"ui_text","z":"79af85de.53d17c","group":"29ea5206.410c5e","order":13,"width":6,"height":1,"name":"","label":"{{msg.if_lang_lable}}","format":"","layout":"col-center","x":190,"y":1420,"wires":[]},{"id":"2de8e779.04cd58","type":"ui_dropdown","z":"79af85de.53d17c","name":"","label":"","tooltip":"","place":"Select option","group":"29ea5206.410c5e","order":14,"width":6,"height":1,"passthru":true,"multiple":false,"options":[{"label":"EN","value":1,"type":"num"}],"payload":"","topic":"","x":340,"y":1500,"wires":[["e79a16c5.87d758"]]},{"id":"e79a16c5.87d758","type":"function","z":"79af85de.53d17c","name":"if_lang_code","func":"var if_lang_code = global.get('if_lang_code')||1;\n\nif(msg.payload == 1)\n{\n    msg.lang_lable = \"language of sounds\";\n        \n    msg.if_lang_lable = \"interface language\";\n    if_lang_code = 1;\n    global.set('if_lang_code', if_lang_code);\n    msg.if_lang_code = if_lang_code;\n}\nelse if(msg.payload == 2)\n{\n    msg.lang_lable = \"langage des sons\";\n        \n    msg.if_lang_lable = \"langue de l'interface\";\n    if_lang_code = 2;\n    global.set('if_lang_code', if_lang_code);\n    msg.if_lang_code = if_lang_code;\n}\nreturn msg","outputs":1,"noerr":0,"x":530,"y":1500,"wires":[["a8c50b9c.19fcb8","ed7fc8fc.c2e148"]]},{"id":"8986da88.5f1598","type":"link in","z":"79af85de.53d17c","name":"lang_code","links":["ed7fc8fc.c2e148"],"x":575,"y":920,"wires":[["5b3e8342.edc2cc"]]},{"id":"e2c7cd19.d3a51","type":"inject","z":"79af85de.53d17c","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":true,"onceDelay":"0.1","x":190,"y":1500,"wires":[["2de8e779.04cd58"]]},{"id":"50bf6278.abc17c","type":"ui_button","z":"eb473c2a.1b334","name":"reset all","group":"89e5900e.1cfcc","order":4,"width":0,"height":0,"passthru":false,"label":"{{msg.btn_txt}}","tooltip":"","color":"","bgcolor":"","icon":"fa-undo","payload":"302","payloadType":"str","topic":"","x":460,"y":360,"wires":[["769d7d8a.547a14","c9710e46.5fb5f","60656c9d.08dc34","c74cd372.2e867","fb2c5d61.7a30a","db3dd96.5bc4328"]]},{"id":"769d7d8a.547a14","type":"mqtt out","z":"eb473c2a.1b334","name":"","topic":"/broadcast","qos":"0","retain":"false","broker":"b7b72d02.5032c","x":1070,"y":520,"wires":[]},{"id":"a081459.4a293b8","type":"ui_button","z":"eb473c2a.1b334","name":"start/started","group":"89e5900e.1cfcc","order":3,"width":0,"height":0,"passthru":false,"label":"{{msg.btn_txt}}","tooltip":"","color":"","bgcolor":"{{background}}","icon":"fa-play","payload":"306","payloadType":"str","topic":"","x":450,"y":600,"wires":[["769d7d8a.547a14","e54673b5.76235","c74cd372.2e867","b43c2f9f.9e8fe"]]},{"id":"719d601a.9ed1a","type":"comment","z":"eb473c2a.1b334","name":"панель управления","info":"","x":210,"y":140,"wires":[]},{"id":"b43c2f9f.9e8fe","type":"function","z":"eb473c2a.1b334","name":"start_btn_text","func":"var start_flag = global.get('start_flag')||0;\nvar if_lang_code = global.get('if_lang_code')||1;\n\nif(start_flag == 1)\n{\n    if (if_lang_code == 1){\n        msg.btn_txt = \"started\";\n    }\n    else{\n        msg.btn_txt = \"gestartet\";\n    }\n}\nelse\n{\n    if (if_lang_code == 1){\n        msg.btn_txt = \"start\";\n    }\n    else{\n        msg.btn_txt = \"start\";\n    }  \n}\n\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":620,"wires":[["17c573da.02c85c"]]},{"id":"5f62e736.2831a8","type":"ui_button","z":"eb473c2a.1b334","name":"sleep_btn","group":"89e5900e.1cfcc","order":5,"width":0,"height":0,"passthru":false,"label":"{{msg.btn_txt}}","tooltip":"","color":"","bgcolor":"","icon":"fa-window-close","payload":"309","payloadType":"str","topic":"","x":440,"y":520,"wires":[["769d7d8a.547a14","c74cd372.2e867","4197ead1.b6fd84","fb2c5d61.7a30a","db3dd96.5bc4328"]]},{"id":"78068927.3861d8","type":"python-function","z":"eb473c2a.1b334","name":"mp3_main_sound","func":"import os\nimport sys\nimport alsaaudio as audio\nimport time\nfrom subprocess import Popen\n\ntrack = \"/media/pi/MP3/MAIN/main.mp3\"\n\nmixer = audio.Mixer('Headphone')\nmixer.setvolume(100)\ntime.sleep(1)\n\nif msg['payload'] == \"306\":\n    player2 = Popen(['omxplayer','--adev','alsa','--vol','-400', track])\nif msg['payload'] == '302' or msg['payload'] == '309':\n    player2 = Popen(['sudo', 'killall', 'omxplayer.bin'])\n    ","outputs":1,"x":1530,"y":340,"wires":[[]]},{"id":"c101f218.9b49f","type":"comment","z":"a469dc94.42301","name":"light","info":"","x":90,"y":40,"wires":[]},{"id":"2817dc42.a68c44","type":"comment","z":"a469dc94.42301","name":"locks","info":"","x":1310,"y":60,"wires":[]},{"id":"17b26c8d.f1eeb3","type":"link in","z":"eb473c2a.1b334","name":"DBG","links":["fb7e3709.b259a8"],"x":1130,"y":220,"wires":[["78068927.3861d8"]],"l":true},{"id":"8cfea2c0.d81fa","type":"ui_button","z":"a469dc94.42301","name":"","group":"98367be2.803378","order":1,"width":0,"height":0,"passthru":false,"label":"soft reset props","tooltip":"","color":"silver","bgcolor":"","icon":"fa-power-off fa-2x","payload":"0x301","payloadType":"str","topic":"","x":1980,"y":1560,"wires":[["619c92cd.d4f67c"]]},{"id":"8bf97a21.dffa58","type":"comment","z":"a469dc94.42301","name":"soft reset","info":"","x":1960,"y":1500,"wires":[]},{"id":"619c92cd.d4f67c","type":"mqtt out","z":"a469dc94.42301","name":"","topic":"/broadcast","qos":"0","retain":"false","broker":"b7b72d02.5032c","x":2550,"y":1560,"wires":[]},{"id":"c9710e46.5fb5f","type":"function","z":"eb473c2a.1b334","name":"global_variables","func":"global.set('start_flag', 0);\nglobal.set('isWineRackWin', 0);\nglobal.set('isTablePuzzleWin', 0);\nglobal.set('isBarrelWallWin', 0);\nglobal.set('isBarrelWin', 0);\nglobal.set('isShakerDubbleWin', 0);\nglobal.set('isLastBottleWin', 0);\nreturn msg;","outputs":1,"noerr":0,"x":900,"y":580,"wires":[["b43c2f9f.9e8fe"]]},{"id":"2fb4698a.800ce6","type":"mqtt out","z":"a469dc94.42301","name":"","topic":"/client_63_sub","qos":"0","retain":"false","broker":"b7b72d02.5032c","x":820,"y":1220,"wires":[]},{"id":"66c34f7e.d5e13","type":"comment","z":"a469dc94.42301","name":"link state","info":"","x":220,"y":1200,"wires":[]},{"id":"55e1cc39.d7bb04","type":"mqtt out","z":"a469dc94.42301","name":"","topic":"/main_sub","qos":"0","retain":"false","broker":"b7b72d02.5032c","x":830,"y":1140,"wires":[]},{"id":"e3c54fa1.ebe57","type":"mqtt out","z":"a469dc94.42301","name":"","topic":"/client_62_sub","qos":"0","retain":"false","broker":"b7b72d02.5032c","x":820,"y":1180,"wires":[]},{"id":"ddd246d8.0f6a78","type":"ui_button","z":"a469dc94.42301","name":"","group":"f7e87146.ea8df","order":1,"width":0,"height":0,"passthru":false,"label":"ping all","tooltip":"","color":"silver","bgcolor":"","icon":"","payload":"0x30A","payloadType":"str","topic":"","x":200,"y":1280,"wires":[["ae1fc720.638308","cfde0178.57948","40ba7c43.b65b14","6109f087.1d06d","7078e82a.7d1458","e3b8c876.18c358","32d1a685.99c75a","be5a1c20.d4eab","97933e95.9d284"]]},{"id":"ae1fc720.638308","type":"delay","z":"a469dc94.42301","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":630,"y":1180,"wires":[["e3c54fa1.ebe57"]]},{"id":"cfde0178.57948","type":"delay","z":"a469dc94.42301","name":"","pauseType":"delay","timeout":"7","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":630,"y":1220,"wires":[["2fb4698a.800ce6"]]},{"id":"40ba7c43.b65b14","type":"delay","z":"a469dc94.42301","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":630,"y":1140,"wires":[["55e1cc39.d7bb04"]]},{"id":"deeaa0a3.3e49d","type":"mqtt out","z":"a469dc94.42301","name":"","topic":"/main_sub","qos":"0","retain":"false","broker":"b7b72d02.5032c","x":2230,"y":300,"wires":[]},{"id":"d15ae89e.439bd8","type":"ui_switch","z":"a469dc94.42301","name":"","label":"LOCK_TABLE","tooltip":"","group":"ccaf1bf8.8489f8","order":2,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"342","onvalueType":"str","onicon":"fa-lock fa-2x","oncolor":"olivedrab","offvalue":"343","offvalueType":"str","officon":"fa-unlock fa-2x","offcolor":"orangered","x":1680,"y":140,"wires":[["deeaa0a3.3e49d"]]},{"id":"a7d805e1.e8f848","type":"ui_switch","z":"a469dc94.42301","name":"","label":"LOCK_WINE_RACK","tooltip":"","group":"ccaf1bf8.8489f8","order":1,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"340","onvalueType":"str","onicon":"fa-lock fa-2x","oncolor":"olivedrab","offvalue":"341","offvalueType":"str","officon":"fa-unlock fa-2x","offcolor":"orangered","x":1700,"y":100,"wires":[["deeaa0a3.3e49d"]]},{"id":"56115b47.ee6e34","type":"ui_switch","z":"a469dc94.42301","name":"","label":"LOCK_BARREL_WALL","tooltip":"","group":"ccaf1bf8.8489f8","order":4,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"346","onvalueType":"str","onicon":"fa-lock fa-2x","oncolor":"olivedrab","offvalue":"347","offvalueType":"str","officon":"fa-unlock fa-2x","offcolor":"orangered","x":1710,"y":220,"wires":[["deeaa0a3.3e49d"]]},{"id":"d10d6529.045078","type":"ui_switch","z":"a469dc94.42301","name":"","label":"CLIMATE_POWER","tooltip":"","group":"ccaf1bf8.8489f8","order":5,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"348","onvalueType":"str","onicon":"fa-lock fa-2x","oncolor":"olivedrab","offvalue":"349","offvalueType":"str","officon":"fa-unlock fa-2x","offcolor":"orangered","x":1690,"y":260,"wires":[["deeaa0a3.3e49d"]]},{"id":"6af61495.54269c","type":"ui_switch","z":"a469dc94.42301","name":"","label":"link m","tooltip":"","group":"f7e87146.ea8df","order":3,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-link fa-2x","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-unlink fa-2x","offcolor":"orangered","x":990,"y":1720,"wires":[[]]},{"id":"76fbf294.99ef0c","type":"comment","z":"a469dc94.42301","name":"link state main","info":"","x":230,"y":1540,"wires":[]},{"id":"abd86b6f.ff2e78","type":"mqtt in","z":"a469dc94.42301","name":"","topic":"/main_pub","qos":"0","datatype":"auto","broker":"b7b72d02.5032c","x":220,"y":1700,"wires":[["786501e1.1f312"]]},{"id":"b372117f.5fcf5","type":"ui_text","z":"a469dc94.42301","group":"f7e87146.ea8df","order":2,"width":7,"height":1,"name":"link state main","label":"main: ","format":"{{msg.text}}","layout":"row-right","x":1020,"y":1680,"wires":[]},{"id":"a3b36d70.21a25","type":"inject","z":"a469dc94.42301","name":"","topic":"","payload":"30","payloadType":"str","repeat":"5","crontab":"","once":true,"onceDelay":"3.5","x":230,"y":1600,"wires":[["72078bb8.ead7b4"]]},{"id":"43103266.82b44c","type":"mqtt out","z":"a469dc94.42301","name":"","topic":"/main_sub","qos":"0","retain":"false","broker":"b7b72d02.5032c","x":790,"y":1600,"wires":[]},{"id":"cb3ebcb5.13491","type":"function","z":"a469dc94.42301","name":"check_link_m","func":"var link_counter = flow.get('link_counter_m') || 0;\n\nif(msg.payload == \"30\")\n{\n    link_counter = (link_counter < 2) ? link_counter + 1 : 2;\n}\n\nif(msg.payload == \"31\")\n{\n    link_counter = 0;\n}\n\nflow.set('link_counter_m', link_counter);\nmsg.link = link_counter;\n\nif(link_counter <= 1)\n{\n    msg.payload = true;\n    msg.text = \"on-line\";\n    return msg;\n}\nelse\n{\n    msg.payload = false;\n    msg.text = \"off-line\";\n    return msg;\n}\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":1700,"wires":[["b372117f.5fcf5","6af61495.54269c","5e26605c.05e9d"]]},{"id":"786501e1.1f312","type":"delay","z":"a469dc94.42301","name":"","pauseType":"delay","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":570,"y":1700,"wires":[["cb3ebcb5.13491"]]},{"id":"2b9c2ca2.6d8724","type":"ui_switch","z":"a469dc94.42301","name":"link wineRackCask","label":"","tooltip":"","group":"f7e87146.ea8df","order":5,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-link fa-2x","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-unlink fa-2x","offcolor":"orangered","x":1030,"y":2000,"wires":[[]]},{"id":"8e2732a6.a964e","type":"comment","z":"a469dc94.42301","name":"link state wineRackCask","info":"","x":270,"y":1820,"wires":[]},{"id":"133f036d.f5601d","type":"mqtt in","z":"a469dc94.42301","name":"","topic":"/client_62_pub","qos":"0","datatype":"auto","broker":"b7b72d02.5032c","x":240,"y":1980,"wires":[["4551bc05.eb19e4"]]},{"id":"67013f91.50d93","type":"ui_text","z":"a469dc94.42301","group":"f7e87146.ea8df","order":4,"width":7,"height":1,"name":"link state: client_62(wineRackCask)","label":"client_62(wineRackCask): ","format":"{{msg.text}}","layout":"row-right","x":1090,"y":1960,"wires":[]},{"id":"3c57f9cf.2a0366","type":"inject","z":"a469dc94.42301","name":"","topic":"","payload":"30","payloadType":"str","repeat":"7","crontab":"","once":true,"onceDelay":"3.8","x":230,"y":1880,"wires":[["1d7e4e3.2725bb2"]]},{"id":"66160ae8.211044","type":"mqtt out","z":"a469dc94.42301","name":"","topic":"/client_62_sub","qos":"0","retain":"false","broker":"b7b72d02.5032c","x":800,"y":1880,"wires":[]},{"id":"21dfa0dd.75ee7","type":"function","z":"a469dc94.42301","name":"check_link_a","func":"var link_counter = flow.get('link_counter_a') || 0;\n\nif(msg.payload == \"30\")\n{\n    link_counter = (link_counter < 2) ? link_counter + 1 : 2;\n}\n\nif(msg.payload == \"31\")\n{\n    link_counter = 0;\n}\n\nflow.set('link_counter_a', link_counter);\nmsg.link = link_counter;\n\nif(link_counter <= 1)\n{\n    msg.payload = true;\n    msg.text = \"on-line\";\n    return msg;\n}\nelse\n{\n    msg.payload = false;\n    msg.text = \"off-line\";\n    return msg;\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":1980,"wires":[["67013f91.50d93","2b9c2ca2.6d8724","8918313e.7d944"]]},{"id":"4551bc05.eb19e4","type":"delay","z":"a469dc94.42301","name":"","pauseType":"delay","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":570,"y":1980,"wires":[["21dfa0dd.75ee7"]]},{"id":"d35949cd.0cb588","type":"link out","z":"a469dc94.42301","name":"ping req","links":["dc46c8fe.f22aa8","71a882fd.fc605c","8ae0ca4e.92cc78","baab8348.8f5c6","f84201a8.105dd","2bd6eb29.1eb064","e8be5ac4.ef8b38","cb060543.315728","14face57.cadce2","a634a168.fec11","946042fa.37203","9ae72fb4.8018a"],"x":495,"y":1480,"wires":[]},{"id":"dc46c8fe.f22aa8","type":"link in","z":"a469dc94.42301","name":"","links":["d35949cd.0cb588"],"x":675,"y":1640,"wires":[["43103266.82b44c","cb3ebcb5.13491"]]},{"id":"8ae0ca4e.92cc78","type":"link in","z":"a469dc94.42301","name":"","links":["d35949cd.0cb588"],"x":675,"y":1920,"wires":[["66160ae8.211044","21dfa0dd.75ee7"]]},{"id":"17c573da.02c85c","type":"function","z":"eb473c2a.1b334","name":"buff","func":"\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":800,"wires":[["a081459.4a293b8"]]},{"id":"6208aca2.686094","type":"comment","z":"aff38e5d.d751b","name":"hint buttons","info":"","x":170,"y":20,"wires":[]},{"id":"e54673b5.76235","type":"link out","z":"eb473c2a.1b334","name":"start timer","links":["cb17a8e7.9acea8","639ebfd3.1ce05","6dc55ba9.4e6f84","f955da5f.b55f38","c68a5a5d.4e6078","6af94441.f7679c","53fc7434.2d090c","c276f0c3.47a16","6bb7ffeb.5b93e","408e9a9c.c69f94","2638db97.bac7b4"],"x":480,"y":660,"wires":[],"l":true},{"id":"cb17a8e7.9acea8","type":"link in","z":"79af85de.53d17c","name":"start timer","links":["e54673b5.76235"],"x":240,"y":340,"wires":[["fcd982f0.31767"]],"outputLabels":["start timer"],"l":true},{"id":"60656c9d.08dc34","type":"link out","z":"eb473c2a.1b334","name":"reset timer","links":["3be19921.ea3056","c4de9716.aa3898","3a580614.08e1fa","745b3778.5be758","995ef7bb.cf9698","da634153.5bfc7","96b15036.decdf","ab3e4efd.d24b7","3cd94e91.d2b122","ccc8997.6049668","19376567.550e2b","eae930dd.dcf44","17f4b513.53f81b"],"x":730,"y":300,"wires":[],"inputLabels":["reset timer"],"l":true},{"id":"3be19921.ea3056","type":"link in","z":"79af85de.53d17c","name":"reset timer","links":["60656c9d.08dc34","a99fd670.35a1b8"],"x":600,"y":640,"wires":[["3934ff15.a4e69"]],"outputLabels":["reset timer"],"l":true},{"id":"dd9d5f0c.55719","type":"function","z":"eb473c2a.1b334","name":"legend sound","func":"var lang_code = global.get('lang_code');\n    \nif(msg.payload == \"306\")  \n{\n    msg.lang_code = lang_code;\n    return msg;\n}","outputs":1,"noerr":0,"x":1740,"y":420,"wires":[["40e3037.d0e3afc"]]},{"id":"c2f91849.4861b8","type":"delay","z":"eb473c2a.1b334","name":"","pauseType":"delay","timeout":"9","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1500,"y":420,"wires":[["dd9d5f0c.55719"]]},{"id":"40e3037.d0e3afc","type":"python-function","z":"eb473c2a.1b334","name":"legend_sound","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack_1 = \"/media/pi/MP3/GAME/EN/Intro.mp3\"\ntrack_2 = \"/media/pi/MP3/GAME/FR/intro 1.mp3\"\n    \nif msg['payload'] == '306':\n    if msg['lang_code'] == 1:\n        player1 = Popen(['omxplayer', track_1])\n    if msg['lang_code'] == 2:\n        player1 = Popen(['omxplayer', track_2])","outputs":1,"x":2000,"y":420,"wires":[[]]},{"id":"2638d9c2.78eca6","type":"inject","z":"79af85de.53d17c","name":"","topic":"","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":true,"onceDelay":"0.1","x":90,"y":920,"wires":[["7583163a.728c48"]]},{"id":"6109f087.1d06d","type":"delay","z":"a469dc94.42301","name":"","pauseType":"delay","timeout":"9","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":630,"y":1260,"wires":[["9b901fb9.a69ad"]]},{"id":"9b901fb9.a69ad","type":"mqtt out","z":"a469dc94.42301","name":"","topic":"/client_64_sub","qos":"0","retain":"false","broker":"b7b72d02.5032c","x":820,"y":1260,"wires":[]},{"id":"59a17cb7.d63134","type":"comment","z":"a469dc94.42301","name":"light brightness","info":"","x":1980,"y":780,"wires":[]},{"id":"f06ddd4d.d962a","type":"ui_switch","z":"a469dc94.42301","name":"","label":"LIGHT_LAMP_ROOM","tooltip":"","group":"a595604c.cb85a","order":1,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"310","onvalueType":"str","onicon":"fa-lightbulb-o fa-2x","oncolor":"gold","offvalue":"311","offvalueType":"str","officon":"fa-lightbulb-o fa-2x","offcolor":"silver","x":440,"y":100,"wires":[["77ee5158.d196a"]]},{"id":"2676174f.792448","type":"ui_switch","z":"a469dc94.42301","name":"","label":"LIGHT_GERBS","tooltip":"","group":"a595604c.cb85a","order":2,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"312","onvalueType":"str","onicon":"fa-lightbulb-o fa-2x","oncolor":"gold","offvalue":"313","offvalueType":"str","officon":"fa-lightbulb-o fa-2x","offcolor":"silver","x":420,"y":140,"wires":[["5dd8be69.17e8c"]]},{"id":"c74cd372.2e867","type":"function","z":"eb473c2a.1b334","name":"TODO once start sound","func":"var start_flag = global.get('start_flag') || 0;\n\nif(msg.payload == \"306\")\n{\n    if(start_flag === 0)\n    {\n        msg.play = true;\n        start_flag = 1;\n        global.set('start_flag', start_flag);\n\n        msg.start_flag = start_flag;\n        return msg;   \n    }\n}\nelse{\n    msg.play = true;\n    msg.payload = \"302\";\n    return msg;\n}\n","outputs":1,"noerr":0,"x":1110,"y":360,"wires":[["78068927.3861d8","cc6b0c56.58423"]]},{"id":"6c839127.dd2d2","type":"comment","z":"aff38e5d.d751b","name":"1 room hints","info":"","x":210,"y":60,"wires":[]},{"id":"e69497f7.3b23f8","type":"comment","z":"aff38e5d.d751b","name":"2 room hints","info":"","x":1710,"y":40,"wires":[]},{"id":"41222d97.29bab4","type":"ui_template","z":"87ebfb8f.5c4158","group":"89e5900e.1cfcc","name":"background_image","order":6,"width":0,"height":0,"format":"<style>\n    body \n    {\n        background-image: url(\"/Vampires.jpg\");\n        background-repeat: no-repeat;\n        /*background-size: contain, cover;*/\n        background-size: cover;\n        background-position: center;\n    }\n</style>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":210,"y":120,"wires":[[]]},{"id":"f8b3b4be.120668","type":"ui_template","z":"87ebfb8f.5c4158","group":"89e5900e.1cfcc","name":"background colors","order":7,"width":0,"height":0,"format":"\n<style>\n    #Haunted_Toystore_timer.ng-scope.visible \n    {\n        background-color: rgba(0,0,0,0.6);\n    }\n    \n    #Haunted_Toystore_props_control_panel.ng-scope.visible \n    {\n        background-color: rgba(0,0,0,0.6);\n    }\n    \n    #Haunted_Toystore_first_room.ng-scope.visible \n    {\n        background-color: rgba(0,0,0,0.6);\n    }\n    \n    #Haunted_Toystore_second_room.ng-scope.visible \n    {\n        background-color: rgba(0,0,0,0.6);\n    }\n    \n</style>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":210,"y":260,"wires":[[]]},{"id":"78d73783.150d78","type":"comment","z":"79af85de.53d17c","name":"hints language","info":"","x":240,"y":820,"wires":[]},{"id":"ce69ce9c.4bb14","type":"comment","z":"79af85de.53d17c","name":"UI language","info":"","x":190,"y":1340,"wires":[]},{"id":"a9527697.75b418","type":"ui_switch","z":"a469dc94.42301","name":"","label":"CLIMATE_DIMMER","tooltip":"","group":"ccaf1bf8.8489f8","order":6,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"350","onvalueType":"str","onicon":"fa-lock fa-2x","oncolor":"olivedrab","offvalue":"351","offvalueType":"str","officon":"fa-unlock fa-2x","offcolor":"orangered","x":1700,"y":300,"wires":[["deeaa0a3.3e49d"]]},{"id":"b7dd5f64.35714","type":"ui_switch","z":"a469dc94.42301","name":"","label":"LOCK_BARREL","tooltip":"","group":"ccaf1bf8.8489f8","order":3,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"344","onvalueType":"str","onicon":"fa-lock fa-2x","oncolor":"olivedrab","offvalue":"345","offvalueType":"str","officon":"fa-unlock fa-2x","offcolor":"orangered","x":1680,"y":180,"wires":[["deeaa0a3.3e49d"]]},{"id":"12cc8226.42742e","type":"ui_switch","z":"a469dc94.42301","name":"","label":"LIGHT_BOTTLE","tooltip":"","group":"a595604c.cb85a","order":3,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"320","onvalueType":"str","onicon":"fa-lightbulb-o fa-2x","oncolor":"gold","offvalue":"321","offvalueType":"str","officon":"fa-lightbulb-o fa-2x","offcolor":"silver","x":420,"y":300,"wires":[["b28bc3ff.b345e"]]},{"id":"1ae2dd56.fe0da3","type":"comment","z":"79af85de.53d17c","name":"actual date","info":"","x":200,"y":20,"wires":[]},{"id":"ab83cfb.cdc8c3","type":"mqtt in","z":"a469dc94.42301","name":"","topic":"/main_callback_pub","qos":"0","datatype":"auto","broker":"b7b72d02.5032c","x":1370,"y":300,"wires":[["a7d805e1.e8f848","d15ae89e.439bd8","b7dd5f64.35714","56115b47.ee6e34","d10d6529.045078","a9527697.75b418"]]},{"id":"bf621496.1071c8","type":"mqtt in","z":"a469dc94.42301","name":"","topic":"/main_callback_pub","qos":"0","datatype":"auto","broker":"b7b72d02.5032c","x":110,"y":300,"wires":[["f06ddd4d.d962a","2676174f.792448","12cc8226.42742e"]]},{"id":"1631b29d.3758ad","type":"ui_button","z":"eb473c2a.1b334","name":"shutdown_rpi","group":"89e5900e.1cfcc","order":9,"width":0,"height":0,"passthru":false,"label":"shutdown RPI","tooltip":"","color":"","bgcolor":"{{background}}","icon":"","payload":"true","payloadType":"bool","topic":"","x":370,"y":980,"wires":[["536ef6e6.580068","817853cb.b7705","e950409f.04f1f"]]},{"id":"378ae31d.fcea6c","type":"python3-function","z":"eb473c2a.1b334","name":"","func":"import os\nimport sys\nfrom subprocess import Popen\nshut = Popen(['sudo', 'shutdown','0'])\n#shut = Popen(['sudo', 'reboot'])","outputs":1,"x":1130,"y":1140,"wires":[[]]},{"id":"536ef6e6.580068","type":"function","z":"eb473c2a.1b334","name":"","func":"var cnt = flow.get('cnt_shutdown') || 0;\nif (msg.payload === false ){\n    cnt = 0;\n    flow.set ('cnt_shutdown',cnt);\n    return null;\n}\n    \nif (msg.payload === true ){\n    cnt++;\n    flow.set ('cnt_shutdown',cnt);\n}\n    \n\n//if (flow.get('cnt_shutdown') == 2){\nif (cnt >= 2){\n    cnt = 0;\n    flow.set ('cnt_shutdown',cnt);\n    return msg;\n}","outputs":1,"noerr":0,"x":810,"y":1000,"wires":[["bb302e15.71407","5ac5883a.d3b8f8"]]},{"id":"817853cb.b7705","type":"trigger","z":"eb473c2a.1b334","op1":"","op2":"false","op1type":"str","op2type":"bool","duration":"5","extend":false,"units":"s","reset":"","bytopic":"all","name":"","x":580,"y":1100,"wires":[["536ef6e6.580068","185b4a62.a3b716"]]},{"id":"a9fd04f8.2d94d8","type":"function","z":"eb473c2a.1b334","name":"","func":"msg.background = \"#aaaa00\";\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":1080,"wires":[["1631b29d.3758ad"]]},{"id":"185b4a62.a3b716","type":"function","z":"eb473c2a.1b334","name":"","func":"msg.background = \"\";\nreturn msg;","outputs":1,"noerr":0,"x":370,"y":1160,"wires":[["1631b29d.3758ad"]]},{"id":"bb302e15.71407","type":"delay","z":"eb473c2a.1b334","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":950,"y":1140,"wires":[["378ae31d.fcea6c"]]},{"id":"fce2babf.163be8","type":"function","z":"eb473c2a.1b334","name":"","func":"msg.background = \"#FF0000\";\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":1240,"wires":[["1631b29d.3758ad"]]},{"id":"5ac5883a.d3b8f8","type":"delay","z":"eb473c2a.1b334","name":"","pauseType":"delay","timeout":"200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":390,"y":1240,"wires":[["fce2babf.163be8"]]},{"id":"e950409f.04f1f","type":"delay","z":"eb473c2a.1b334","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":130,"y":1080,"wires":[["a9fd04f8.2d94d8"]]},{"id":"8d37c695.fad0a8","type":"link out","z":"eb473c2a.1b334","name":"reset_delay","links":["61a7f030.16f9e","7fe82d0f.c491a4","1ad64d.640109b4"],"x":555,"y":240,"wires":[]},{"id":"fb2c5d61.7a30a","type":"function","z":"eb473c2a.1b334","name":"func_reset_delay","func":"msg.reset = true;\nreturn msg;","outputs":1,"noerr":0,"x":370,"y":240,"wires":[["8d37c695.fad0a8"]]},{"id":"7fe82d0f.c491a4","type":"link in","z":"eb473c2a.1b334","name":"","links":["8d37c695.fad0a8"],"x":895,"y":440,"wires":[["c2f91849.4861b8"]]},{"id":"23fef2d.c8c120e","type":"function","z":"eb473c2a.1b334","name":"reset_all_btn_text","func":"var start_flag = global.get('start_flag')||0;\nvar if_lang_code = global.get('if_lang_code')||1;\n\n\n    if (if_lang_code == 1){\n        msg.btn_txt = \"Reset all\";\n    }\n    else{\n        msg.btn_txt = \"effacer tout\";\n    }\n\nreturn msg;","outputs":1,"noerr":0,"x":250,"y":360,"wires":[["50bf6278.abc17c"]]},{"id":"cd9e6b58.fd4798","type":"link in","z":"eb473c2a.1b334","name":"","links":["ed7fc8fc.c2e148"],"x":95,"y":360,"wires":[["23fef2d.c8c120e","87a2b890.7f1348","b43c2f9f.9e8fe"]]},{"id":"87a2b890.7f1348","type":"function","z":"eb473c2a.1b334","name":"sleep_btn_text","func":"var start_flag = global.get('start_flag')||0;\nvar if_lang_code = global.get('if_lang_code')||1;\n\n\n    if (if_lang_code == 1){\n        msg.btn_txt = \"sleep\";\n    }\n    else{\n        msg.btn_txt = \"mode veille\";\n    }\n\nreturn msg;","outputs":1,"noerr":0,"x":240,"y":520,"wires":[["5f62e736.2831a8"]]},{"id":"db3dd96.5bc4328","type":"function","z":"eb473c2a.1b334","name":"func_msg_to_false","func":"msg.payload = false;\nreturn msg;","outputs":1,"noerr":0,"x":350,"y":200,"wires":[["301aca04.7a6d86"]]},{"id":"301aca04.7a6d86","type":"link out","z":"eb473c2a.1b334","name":"func_msg_to_false_link","links":["2601a604.8d4e0a","2f1fbde0.432ae2","e5126f42.117be","61c052f7.6d4dec"],"x":555,"y":200,"wires":[]},{"id":"8918313e.7d944","type":"link out","z":"a469dc94.42301","name":"WineRackCask_link","links":["46ecc7ec.94bd98"],"x":975,"y":2080,"wires":[]},{"id":"6367f364.88953c","type":"function","z":"eb473c2a.1b334","name":"func_main_state","func":"if(msg.payload === true)\n{\n    msg.background = 0;\n    return msg;\n}\nelse if(msg.payload === false)\n{\n    msg.background = \"#FF0000\";\n    return msg;\n}","outputs":1,"noerr":0,"x":740,"y":680,"wires":[["b43c2f9f.9e8fe"]]},{"id":"c9ff3eef.d9695","type":"link in","z":"eb473c2a.1b334","name":"","links":["5e26605c.05e9d"],"x":595,"y":680,"wires":[["6367f364.88953c"]]},{"id":"5e26605c.05e9d","type":"link out","z":"a469dc94.42301","name":"main_link_state","links":["c9ff3eef.d9695"],"x":955,"y":1780,"wires":[]},{"id":"72078bb8.ead7b4","type":"delay","z":"a469dc94.42301","name":"","pauseType":"random","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"300","randomLast":"700","randomUnits":"milliseconds","drop":false,"x":480,"y":1600,"wires":[["43103266.82b44c","cb3ebcb5.13491"]]},{"id":"1d7e4e3.2725bb2","type":"delay","z":"a469dc94.42301","name":"","pauseType":"random","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"300","randomLast":"700","randomUnits":"milliseconds","drop":false,"x":480,"y":1880,"wires":[["66160ae8.211044","21dfa0dd.75ee7"]]},{"id":"f7cd78a5.6cd838","type":"comment","z":"ed820623.bf0ea8","name":"START_GAME","info":"","x":140,"y":60,"wires":[]},{"id":"543ed5a1.8c3d5c","type":"mqtt out","z":"ed820623.bf0ea8","name":"","topic":"/main_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":1190,"y":40,"wires":[]},{"id":"c276f0c3.47a16","type":"link in","z":"ed820623.bf0ea8","name":"from_start_timer","links":["e54673b5.76235"],"x":220,"y":120,"wires":[["513cdf8f.98271","6fe67ff9.e84b8","d402b981.badc48","a6cae98b.17db58","f9e0f416.2d46a8","828e61bb.c618b","2716af3.3d1425","fa1491f1.07e3b","ab290dbc.8bc78","9be8ba4f.3bb088"]],"l":true},{"id":"513cdf8f.98271","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":530,"y":140,"wires":[["9aa560c9.423d3"]]},{"id":"6fe67ff9.e84b8","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"150","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":530,"y":180,"wires":[["67b4c805.f2fc18"]]},{"id":"d402b981.badc48","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"350","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":530,"y":240,"wires":[["7c61b459.483c3c"]]},{"id":"a6cae98b.17db58","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"400","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":530,"y":300,"wires":[["34862084.45ca8"]]},{"id":"f9e0f416.2d46a8","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"450","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":530,"y":340,"wires":[["5b2621d9.0f3eb"]]},{"id":"828e61bb.c618b","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":530,"y":380,"wires":[["b2e1f5e7.8d9fc8"]]},{"id":"2716af3.3d1425","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"550","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":530,"y":420,"wires":[["d5f61ea7.4d1b9"]]},{"id":"177acd0.c92c233","type":"comment","z":"ed820623.bf0ea8","name":"SLEEP","info":"","x":110,"y":1240,"wires":[]},{"id":"9aa560c9.423d3","type":"function","z":"ed820623.bf0ea8","name":"light_white_room_1_on","func":"msg.payload = \"light_lamp_room_11_12_110\";\nreturn msg;","outputs":1,"noerr":0,"x":770,"y":140,"wires":[["543ed5a1.8c3d5c"]]},{"id":"67b4c805.f2fc18","type":"function","z":"ed820623.bf0ea8","name":"light_gerbs_off","func":"msg.payload = \"light_gerbs_0\";\nreturn msg;","outputs":1,"noerr":0,"x":740,"y":180,"wires":[["543ed5a1.8c3d5c"]]},{"id":"34862084.45ca8","type":"function","z":"ed820623.bf0ea8","name":"LOCK_WINE_RACK","func":"msg.payload = \"340\"\nreturn msg;","outputs":1,"noerr":0,"x":760,"y":300,"wires":[["543ed5a1.8c3d5c"]]},{"id":"b2e1f5e7.8d9fc8","type":"function","z":"ed820623.bf0ea8","name":"LOCK_BARREL","func":"msg.payload = \"344\"\nreturn msg;","outputs":1,"noerr":0,"x":740,"y":380,"wires":[["543ed5a1.8c3d5c"]]},{"id":"d5f61ea7.4d1b9","type":"function","z":"ed820623.bf0ea8","name":"LOCK_BARREL_WALL","func":"msg.payload = \"346\"\nreturn msg;","outputs":1,"noerr":0,"x":770,"y":420,"wires":[["543ed5a1.8c3d5c"]]},{"id":"5b2621d9.0f3eb","type":"function","z":"ed820623.bf0ea8","name":"LOCK_TABLE","func":"msg.payload = \"342\"\nreturn msg;","outputs":1,"noerr":0,"x":740,"y":340,"wires":[["543ed5a1.8c3d5c"]]},{"id":"77ee5158.d196a","type":"function","z":"a469dc94.42301","name":"msg_convertor","func":"if(msg.payload == \"310\"){\n    msg.payload = \"light_lamp_room_11_12_110\";\n}\nelse{\n    msg.payload = \"light_lamp_room_11_12_0\";\n}\nreturn msg;","outputs":1,"noerr":0,"x":760,"y":100,"wires":[["a0deb2ad.2c539"]]},{"id":"a0deb2ad.2c539","type":"mqtt out","z":"a469dc94.42301","name":"","topic":"/main_sub","qos":"0","retain":"false","broker":"b7b72d02.5032c","x":1110,"y":100,"wires":[]},{"id":"5dd8be69.17e8c","type":"function","z":"a469dc94.42301","name":"msg_convertor","func":"if(msg.payload == \"312\"){\n    msg.payload = \"light_gerbs_250\";\n}\nelse{\n    msg.payload = \"light_gerbs_0\";\n}\nreturn msg;","outputs":1,"noerr":0,"x":760,"y":141,"wires":[["a0deb2ad.2c539"]]},{"id":"b28bc3ff.b345e","type":"function","z":"a469dc94.42301","name":"msg_convertor","func":"if(msg.payload == \"320\"){\n    msg.payload = \"light_bottle_110\";\n}\nelse{\n    msg.payload = \"light_bottle_0\";\n}\nreturn msg;","outputs":1,"noerr":0,"x":760,"y":300,"wires":[["a0deb2ad.2c539"]]},{"id":"fa1491f1.07e3b","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"1200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":540,"y":500,"wires":[["2f053d91.c3eb52"]]},{"id":"ab290dbc.8bc78","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"2000","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":540,"y":540,"wires":[["481e1cae.c556c4"]]},{"id":"2f053d91.c3eb52","type":"function","z":"ed820623.bf0ea8","name":"climate_power_off","func":"msg.payload = \"349\"\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":500,"wires":[["29ce853b.91975a"]]},{"id":"481e1cae.c556c4","type":"function","z":"ed820623.bf0ea8","name":"climate_dim_on","func":"msg.payload = \"350\"\nreturn msg;","outputs":1,"noerr":0,"x":740,"y":540,"wires":[["29ce853b.91975a"]]},{"id":"4197ead1.b6fd84","type":"link out","z":"eb473c2a.1b334","name":"link_sleep_btn","links":["ca9edeac.e83be"],"x":455,"y":560,"wires":[]},{"id":"ca9edeac.e83be","type":"link in","z":"ed820623.bf0ea8","name":"","links":["4197ead1.b6fd84"],"x":155,"y":1320,"wires":[["a4577de5.c84d9","8404b149.c345c","eff0d8a4.ce5768","30b32590.59964a","5220571b.756ad8","69d99a17.2bda14","9700055a.5cab58","5449ad55.cc50f4","1c1d0bbf.8d66f4"]]},{"id":"36368ab4.55c3c6","type":"comment","z":"ed820623.bf0ea8","name":"Restart","info":"","x":1430,"y":40,"wires":[]},{"id":"995ef7bb.cf9698","type":"link in","z":"ed820623.bf0ea8","name":"from_restart_timer","links":["60656c9d.08dc34"],"x":1510,"y":160,"wires":[["52c01260.c78bac","638eae30.dde8d","bcead5c1.f1b1e8","d8032df4.4ceba","df6cf136.ec727","fd7dba90.bbc3b8","b974862f.da3e38","c55c6b9.fcf0498","a2e8cead.9f38b","f239835d.9dd2d"]],"l":true},{"id":"7c61b459.483c3c","type":"function","z":"ed820623.bf0ea8","name":"light_bottle_off","func":"msg.payload = \"light_bottle_0\"\nreturn msg;","outputs":1,"noerr":0,"x":740,"y":240,"wires":[["543ed5a1.8c3d5c"]]},{"id":"6bb37d4c.ab25c4","type":"ui_switch","z":"a469dc94.42301","d":true,"name":"","label":"brightness control enable","tooltip":"","group":"98367be2.803378","order":2,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-toggle-on fa-2x","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-toggle-off fa-2x","offcolor":"orangered","x":2270,"y":860,"wires":[[]]},{"id":"86a9c3c8.acb97","type":"function","z":"a469dc94.42301","d":true,"name":"hide group","func":"if(msg.payload === true)\n{\n    msg.payload = {\"group\": {\"show\": [\"debug_console_light_brightness\"]}};\n    return msg;\n}\nelse if(msg.payload === false)\n{\n    msg.payload = {\"group\": {\"hide\": [\"debug_console_light_brightness\"]}};\n    return msg;\n}","outputs":1,"noerr":0,"x":2550,"y":860,"wires":[[]]},{"id":"6c07de68.87343","type":"ui_ui_control","z":"a469dc94.42301","d":true,"name":"","events":"change","x":2780,"y":860,"wires":[[]]},{"id":"b76e2ec2.5b4b7","type":"inject","z":"a469dc94.42301","d":true,"name":"disable when flow started","topic":"","payload":"false","payloadType":"bool","repeat":"","crontab":"","once":true,"onceDelay":"1","x":1930,"y":860,"wires":[[]]},{"id":"7078e82a.7d1458","type":"looptimer","z":"a469dc94.42301","duration":"1","units":"Second","maxloops":"2","maxtimeout":"4","maxtimeoutunits":"Second","name":"","x":360,"y":1440,"wires":[["d35949cd.0cb588"],[]]},{"id":"9be8ba4f.3bb088","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":530,"y":580,"wires":[["12bfe5cb.4e1b6a"]]},{"id":"29ce853b.91975a","type":"mqtt out","z":"ed820623.bf0ea8","name":"","topic":"/main_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":1070,"y":520,"wires":[]},{"id":"76636592.d5c80c","type":"mqtt out","z":"ed820623.bf0ea8","name":"","topic":"/main_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":2350,"y":520,"wires":[]},{"id":"52c01260.c78bac","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"1200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1820,"y":680,"wires":[[]]},{"id":"638eae30.dde8d","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"2000","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1820,"y":720,"wires":[["9ec795ee.b76e98"]]},{"id":"9ec795ee.b76e98","type":"function","z":"ed820623.bf0ea8","name":"climate_dim_off","func":"msg.payload = \"351\"\nreturn msg;","outputs":1,"noerr":0,"x":2020,"y":720,"wires":[["e6c55fb7.ede3b"]]},{"id":"bcead5c1.f1b1e8","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"2500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1820,"y":760,"wires":[["7bb34043.be1af"]]},{"id":"e6c55fb7.ede3b","type":"mqtt out","z":"ed820623.bf0ea8","name":"","topic":"/main_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":2330,"y":720,"wires":[]},{"id":"7bb34043.be1af","type":"function","z":"ed820623.bf0ea8","name":"climate_power_on","func":"msg.payload = \"348\"\nreturn msg;","outputs":1,"noerr":0,"x":2030,"y":760,"wires":[["e6c55fb7.ede3b"]]},{"id":"ee99c279.57e42","type":"mqtt out","z":"ed820623.bf0ea8","name":"","topic":"/main_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":930,"y":1520,"wires":[]},{"id":"a4577de5.c84d9","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"1200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":380,"y":1740,"wires":[["33c514ce.98735c"]]},{"id":"8404b149.c345c","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"2000","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":380,"y":1780,"wires":[["5d81bfd5.2301b"]]},{"id":"33c514ce.98735c","type":"function","z":"ed820623.bf0ea8","name":"climate_power_off","func":"msg.payload = \"362\"\nreturn msg;","outputs":1,"noerr":0,"x":590,"y":1740,"wires":[["fff5bae7.512dd8"]]},{"id":"5d81bfd5.2301b","type":"function","z":"ed820623.bf0ea8","name":"climate_dim_off","func":"msg.payload = \"364\"\nreturn msg;","outputs":1,"noerr":0,"x":580,"y":1780,"wires":[["fff5bae7.512dd8"]]},{"id":"fff5bae7.512dd8","type":"mqtt out","z":"ed820623.bf0ea8","name":"","topic":"/main_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":890,"y":1780,"wires":[]},{"id":"4ad8269c.341458","type":"ui_button","z":"aff38e5d.d751b","name":"h_wineRack1","group":"e3d56fa7.f1697","order":13,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-comment-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":366,"y":240,"wires":[["865fcce9.5de17","3b4e2c0b.26ad94"]]},{"id":"bebf5588.ce4c78","type":"ui_button","z":"aff38e5d.d751b","name":"h_wineRack2","group":"e3d56fa7.f1697","order":14,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-commenting-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":366,"y":280,"wires":[["f58b8251.7dd18","2038911.1d9cc6e"]]},{"id":"647bca9b.e80af4","type":"ui_button","z":"aff38e5d.d751b","name":"h_corkScrew1","group":"e3d56fa7.f1697","order":18,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-comment-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":360,"y":460,"wires":[["a8c61e86.d9216","a6118686.fce868"]]},{"id":"12d9cfbd.cada4","type":"ui_button","z":"aff38e5d.d751b","name":"h_corkScrew2","group":"e3d56fa7.f1697","order":19,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-commenting-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":360,"y":500,"wires":[["32b559f4.1dec16","bcd0ac31.c9125"]]},{"id":"25c93a3b.ec34d6","type":"link in","z":"aff38e5d.d751b","name":"","links":["ed7fc8fc.c2e148"],"x":35,"y":380,"wires":[["6e999fea.5671b"]]},{"id":"6e999fea.5671b","type":"function","z":"aff38e5d.d751b","name":"set_btn_text","func":"var start_flag = global.get('start_flag')||0;\nvar if_lang_code = global.get('if_lang_code')||1;\n\nif (if_lang_code == 1){\n    msg.lang_label = \"lights\";\n}\nelse{\n    msg.lang_label = \"lights_FR\";\n}\nreturn msg;","outputs":1,"noerr":0,"x":150,"y":380,"wires":[[]]},{"id":"6d7737e4.7af6c8","type":"link in","z":"aff38e5d.d751b","name":"","links":["ed7fc8fc.c2e148"],"x":35,"y":760,"wires":[["ea96a6ec.0b88f8"]]},{"id":"ea96a6ec.0b88f8","type":"function","z":"aff38e5d.d751b","name":"set_btn_text","func":"var start_flag = global.get('start_flag')||0;\nvar if_lang_code = global.get('if_lang_code')||1;\n\nif (if_lang_code == 1){\n    msg.lang_label = \"touch\";\n}\nelse{\n    msg.lang_label = \"touch_FR\";\n}\nreturn msg;","outputs":1,"noerr":0,"x":150,"y":760,"wires":[[]]},{"id":"408e9a9c.c69f94","type":"link in","z":"eb473c2a.1b334","name":"","links":["e54673b5.76235"],"x":1315,"y":540,"wires":[["c2f91849.4861b8"]]},{"id":"cc6b0c56.58423","type":"debug","z":"eb473c2a.1b334","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1490,"y":220,"wires":[]},{"id":"94360217.96f87","type":"exec","z":"aff38e5d.d751b","command":"python3 /media/pi/MP3/kill_talk.py","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":860,"y":60,"wires":[[],[],[]]},{"id":"865fcce9.5de17","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":240,"wires":[["b3f37343.8175e"]]},{"id":"b3f37343.8175e","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":750,"y":240,"wires":[["83218b6d.973ae8"]]},{"id":"83218b6d.973ae8","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Wine rack 1.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Wine rack 1.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":940,"y":240,"wires":[[]]},{"id":"f58b8251.7dd18","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":280,"wires":[["d5541b35.d69468"]]},{"id":"d5541b35.d69468","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":750,"y":280,"wires":[["a7151f0f.ee174"]]},{"id":"a7151f0f.ee174","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Wine rack 2.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Wine rack 2.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":940,"y":280,"wires":[[]]},{"id":"a8c61e86.d9216","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":542,"y":460,"wires":[["7d4b842b.18c1ac"]]},{"id":"7d4b842b.18c1ac","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":742,"y":460,"wires":[["b656e8c7.ffda78"]]},{"id":"b656e8c7.ffda78","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Corkscrew 1.mp3\"\n\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":932,"y":460,"wires":[[]]},{"id":"32b559f4.1dec16","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":542,"y":500,"wires":[["8ef6c214.9b6bf"]]},{"id":"8ef6c214.9b6bf","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":742,"y":500,"wires":[["3b5f450e.fda28a"]]},{"id":"3b5f450e.fda28a","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Corkscrew 2.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Corkscrew 2.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":932,"y":500,"wires":[[]]},{"id":"3b4e2c0b.26ad94","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":495,"y":180,"wires":[]},{"id":"ac3cc4ee.7e3c98","type":"link in","z":"aff38e5d.d751b","name":"kill_omx_hint","links":["3b4e2c0b.26ad94","2038911.1d9cc6e","a6118686.fce868","bcd0ac31.c9125","8a75c121.df57f","a2a68128.65481","916392fe.78072","497d3e2c.6df3c","d5b68f9.d98c27","36d6ab62.bc5fa4","bc877bdb.baad18","954f2518.74cc78","3791bc04.031b04","a257e867.019248","3e88ca39.93f856","db1877c8.dd2e78","95336d72.0f886","12cc8eea.b0f091","de1de60a.19f758","26e92598.0e504a","852459d4.c4d8d8","e3ab7afb.beb998","9cc95f7c.1b375","106cf834.faf348","94804830.b6d208","4b4d379f.f83e58","94e39138.2718","1faebb59.fdb085","13271931.c1c6d7","1ddd1423.8b82fc","189d092a.40b717","8b887194.04468","e14ef6e4.d640e8","d286c770.ae63e8","8923807a.5a7f5","cec117f8.71b788","efd0ab50.746d78","f5976f1f.16155","7a7fb86.0070848","eb25e832.3ee578","eb7ae210.0594a","6ee0eba0.0472a4","79ec6fd5.cb51c","297c807d.b6a2d","88f9bdb1.49faf","4cc4eb80.145e74","d3d7da1b.760268","3503cf54.ec5f4","504c896d.e191f8"],"x":635,"y":60,"wires":[["94360217.96f87"]]},{"id":"2038911.1d9cc6e","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":495,"y":340,"wires":[]},{"id":"a6118686.fce868","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":487,"y":400,"wires":[]},{"id":"bcd0ac31.c9125","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":475,"y":560,"wires":[]},{"id":"9817250f.3e6c88","type":"ui_button","z":"aff38e5d.d751b","name":"h_tablePuzzle1","group":"e3d56fa7.f1697","order":34,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-comment-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":360,"y":680,"wires":[["99c36ac7.f845a8","9cc95f7c.1b375"]]},{"id":"cf1221b4.30038","type":"ui_button","z":"aff38e5d.d751b","name":"h_tablePuzzle2","group":"e3d56fa7.f1697","order":35,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-commenting-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":360,"y":720,"wires":[["a39e0c56.27d21","106cf834.faf348"]]},{"id":"c0b7632f.a3e0e","type":"ui_button","z":"aff38e5d.d751b","name":"h_coasters1","group":"e3d56fa7.f1697","order":40,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-comment-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":344,"y":900,"wires":[["2c6e8ae3.e7d2d6","94804830.b6d208"]]},{"id":"3abd706a.f5acb","type":"ui_button","z":"aff38e5d.d751b","name":"h_coasters2","group":"e3d56fa7.f1697","order":41,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-commenting-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":344,"y":940,"wires":[["1f86c56d.998f4b","4b4d379f.f83e58"]]},{"id":"99c36ac7.f845a8","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":547,"y":680,"wires":[["c5259acc.f27e58"]]},{"id":"c5259acc.f27e58","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":747,"y":680,"wires":[["4c5e6a22.250a64"]]},{"id":"4c5e6a22.250a64","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Table puzzle 1.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Table puzzle 1.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":937,"y":680,"wires":[[]]},{"id":"a39e0c56.27d21","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":547,"y":720,"wires":[["4147f35d.ce7dcc"]]},{"id":"4147f35d.ce7dcc","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":747,"y":720,"wires":[["1ca377fd.d94f98"]]},{"id":"1ca377fd.d94f98","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Table puzzle 2.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Table puzzle 2.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":937,"y":720,"wires":[[]]},{"id":"2c6e8ae3.e7d2d6","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":539,"y":900,"wires":[["f977f193.7ab1d"]]},{"id":"f977f193.7ab1d","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":739,"y":900,"wires":[["50adeb0c.1947a4"]]},{"id":"50adeb0c.1947a4","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Coasters 1.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Coasters 1.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":929,"y":900,"wires":[[]]},{"id":"1f86c56d.998f4b","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":539,"y":940,"wires":[["b7b55df1.84f2a"]]},{"id":"b7b55df1.84f2a","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":739,"y":940,"wires":[["96a0127d.911d9"]]},{"id":"96a0127d.911d9","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Coasters 2.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Coasters 2.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":929,"y":940,"wires":[[]]},{"id":"9cc95f7c.1b375","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":492,"y":620,"wires":[]},{"id":"106cf834.faf348","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":492,"y":780,"wires":[]},{"id":"94804830.b6d208","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":484,"y":840,"wires":[]},{"id":"4b4d379f.f83e58","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":472,"y":1000,"wires":[]},{"id":"48863573.f97cdc","type":"ui_button","z":"aff38e5d.d751b","name":"h_proclamation1","group":"e3d56fa7.f1697","order":43,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-comment-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":350,"y":1200,"wires":[["8d0f4d85.66761","94e39138.2718"]]},{"id":"29293f5a.6290e","type":"ui_button","z":"aff38e5d.d751b","name":"h_proclamation2","group":"e3d56fa7.f1697","order":44,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-commenting-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":350,"y":1240,"wires":[["cb412804.dfe948","1faebb59.fdb085"]]},{"id":"4107fc42.108564","type":"ui_button","z":"aff38e5d.d751b","name":"h_rotateLocks1","group":"e3d56fa7.f1697","order":46,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-comment-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":334,"y":1420,"wires":[["ed72156.bb748e8","13271931.c1c6d7"]]},{"id":"e7154cd.b0d64b","type":"ui_button","z":"aff38e5d.d751b","name":"h_rotateLocks2","group":"e3d56fa7.f1697","order":47,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-commenting-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":334,"y":1460,"wires":[["319fb869.a35db8","1ddd1423.8b82fc"]]},{"id":"8d0f4d85.66761","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":524,"y":1200,"wires":[["403650f.f6784b"]]},{"id":"403650f.f6784b","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":724,"y":1200,"wires":[["cd17bc88.6a894"]]},{"id":"cd17bc88.6a894","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Proclamation 1.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Proclamation 1.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":914,"y":1200,"wires":[[]]},{"id":"cb412804.dfe948","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":524,"y":1240,"wires":[["3344526a.f2479e"]]},{"id":"3344526a.f2479e","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":724,"y":1240,"wires":[["977604df.4e8f68"]]},{"id":"977604df.4e8f68","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Proclamation 2.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Proclamation 2.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":914,"y":1240,"wires":[[]]},{"id":"ed72156.bb748e8","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":516,"y":1420,"wires":[["94b87c1a.9d72"]]},{"id":"94b87c1a.9d72","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":716,"y":1420,"wires":[["914db816.b402d8"]]},{"id":"914db816.b402d8","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/rotating locks 1.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/rotating locks 1.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":906,"y":1420,"wires":[[]]},{"id":"319fb869.a35db8","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":516,"y":1460,"wires":[["28fdb711.36d058"]]},{"id":"28fdb711.36d058","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":716,"y":1460,"wires":[["27c3dc7e.1bfb94"]]},{"id":"27c3dc7e.1bfb94","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/rotating locks 2.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/rotating locks 2.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":906,"y":1460,"wires":[[]]},{"id":"94e39138.2718","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":469,"y":1140,"wires":[]},{"id":"1faebb59.fdb085","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":469,"y":1300,"wires":[]},{"id":"13271931.c1c6d7","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":461,"y":1360,"wires":[]},{"id":"1ddd1423.8b82fc","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":449,"y":1520,"wires":[]},{"id":"302741c.edfa6be","type":"ui_button","z":"aff38e5d.d751b","name":"h_shakerBox1","group":"e3d56fa7.f1697","order":56,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-comment-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":334,"y":1640,"wires":[["f5d5cbad.ce8f48","189d092a.40b717"]]},{"id":"de07a27.704a66","type":"ui_button","z":"aff38e5d.d751b","name":"h_shakerBox2","group":"e3d56fa7.f1697","order":57,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-commenting-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":334,"y":1680,"wires":[["99913ab8.71c088","8b887194.04468"]]},{"id":"74e6fef4.95087","type":"ui_button","z":"aff38e5d.d751b","name":"h_uvBottles1","group":"a210fd84.28e45","order":1,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-comment-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":318,"y":1860,"wires":[["a9d434e1.8e8828","e14ef6e4.d640e8"]]},{"id":"57d1165e.578b08","type":"ui_button","z":"aff38e5d.d751b","name":"h_uvBottles2","group":"a210fd84.28e45","order":2,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-commenting-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":318,"y":1900,"wires":[["fcee6609.30d918","d286c770.ae63e8"]]},{"id":"f5d5cbad.ce8f48","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":521,"y":1640,"wires":[["d99adaf7.631198"]]},{"id":"d99adaf7.631198","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":721,"y":1640,"wires":[["1c0e2a61.664c26"]]},{"id":"1c0e2a61.664c26","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Shaker boxes 1.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Shaker boxes 1.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":911,"y":1640,"wires":[[]]},{"id":"99913ab8.71c088","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":521,"y":1680,"wires":[["fa863cfe.38575"]]},{"id":"fa863cfe.38575","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":721,"y":1680,"wires":[["23ce4a82.8f2c96"]]},{"id":"23ce4a82.8f2c96","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Shaker boxes 2.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Shaker boxes 2.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":911,"y":1680,"wires":[[]]},{"id":"a9d434e1.8e8828","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":513,"y":1860,"wires":[["3bc27f64.74c5c"]]},{"id":"3bc27f64.74c5c","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":713,"y":1860,"wires":[["c3ba86a3.954db8"]]},{"id":"c3ba86a3.954db8","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/UV bottles 1.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/UV bottles 1.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":903,"y":1860,"wires":[[]]},{"id":"fcee6609.30d918","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":513,"y":1900,"wires":[["d6e35bd3.986678"]]},{"id":"d6e35bd3.986678","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":713,"y":1900,"wires":[["5ad2bee2.64595"]]},{"id":"5ad2bee2.64595","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/UV bottles 2.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/UV bottles 2.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":903,"y":1900,"wires":[[]]},{"id":"189d092a.40b717","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":466,"y":1580,"wires":[]},{"id":"8b887194.04468","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":466,"y":1740,"wires":[]},{"id":"e14ef6e4.d640e8","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":458,"y":1800,"wires":[]},{"id":"d286c770.ae63e8","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":446,"y":1960,"wires":[]},{"id":"b07acb74.e67e18","type":"ui_button","z":"aff38e5d.d751b","name":"h_wineLoaction1","group":"a210fd84.28e45","order":4,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-comment-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":330,"y":2120,"wires":[["3fc686a.b0d967a"]]},{"id":"5331eba6.57ed54","type":"ui_button","z":"aff38e5d.d751b","name":"h_wineLoaction2","group":"a210fd84.28e45","order":5,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-commenting-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":330,"y":2160,"wires":[["74471b77.6746b4","8923807a.5a7f5"]]},{"id":"be407d2.52c958","type":"ui_button","z":"aff38e5d.d751b","name":"h_cellarPlan1","group":"a210fd84.28e45","order":7,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-comment-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":314,"y":2340,"wires":[["5c36b265.32261c","cec117f8.71b788"]]},{"id":"3cc21ec8.f2fb82","type":"ui_button","z":"aff38e5d.d751b","name":"h_cellarPlan2","group":"a210fd84.28e45","order":8,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-commenting-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":314,"y":2380,"wires":[["f4af41ce.071b2","efd0ab50.746d78"]]},{"id":"3fc686a.b0d967a","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":504,"y":2120,"wires":[["f08b5f9f.79e1e"]]},{"id":"f08b5f9f.79e1e","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":704,"y":2120,"wires":[["3fa1e59a.6db5ea"]]},{"id":"3fa1e59a.6db5ea","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Wines location 1.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Wines location 1.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":894,"y":2120,"wires":[[]]},{"id":"74471b77.6746b4","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":504,"y":2160,"wires":[["dc6b952f.3e30b8"]]},{"id":"dc6b952f.3e30b8","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":704,"y":2160,"wires":[["b21a3e34.bbae5"]]},{"id":"b21a3e34.bbae5","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Wines location 2.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Wines location 2.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":894,"y":2160,"wires":[[]]},{"id":"5c36b265.32261c","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":496,"y":2340,"wires":[["416ab35f.4b255c"]]},{"id":"416ab35f.4b255c","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":696,"y":2340,"wires":[["53381e9d.74ea1"]]},{"id":"53381e9d.74ea1","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Cellar plan 1.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Cellar plan 1.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":886,"y":2340,"wires":[[]]},{"id":"f4af41ce.071b2","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":496,"y":2380,"wires":[["e10b954.015b268"]]},{"id":"e10b954.015b268","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":696,"y":2380,"wires":[["bbc2b283.3eabd"]]},{"id":"bbc2b283.3eabd","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Cellar plan 2.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Cellar plan 2.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":886,"y":2380,"wires":[[]]},{"id":"8923807a.5a7f5","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":449,"y":2220,"wires":[]},{"id":"cec117f8.71b788","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":441,"y":2280,"wires":[]},{"id":"efd0ab50.746d78","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":429,"y":2440,"wires":[]},{"id":"580c5cf2.e3d574","type":"ui_button","z":"aff38e5d.d751b","name":"h_coa1","group":"a210fd84.28e45","order":10,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-comment-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":294,"y":2560,"wires":[["9563dc7b.85c92","f5976f1f.16155"]]},{"id":"e9aedebc.fb36e","type":"ui_button","z":"aff38e5d.d751b","name":"h_coa2","group":"a210fd84.28e45","order":11,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-commenting-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":294,"y":2600,"wires":[["bad57f24.d7265","7a7fb86.0070848"]]},{"id":"b455aa0c.3a8ba8","type":"ui_button","z":"aff38e5d.d751b","name":"h_barrel1","group":"a210fd84.28e45","order":20,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-comment-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":288,"y":2780,"wires":[["4f9a8c27.4bc384","eb25e832.3ee578"]]},{"id":"1cbbb483.65220b","type":"ui_button","z":"aff38e5d.d751b","name":"h_barrel2","group":"a210fd84.28e45","order":21,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-commenting-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":288,"y":2820,"wires":[["40000717.521ee8","eb7ae210.0594a"]]},{"id":"9563dc7b.85c92","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":501,"y":2560,"wires":[["7f2663ee.7d794c"]]},{"id":"7f2663ee.7d794c","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":701,"y":2560,"wires":[["57bbf57c.a4c3ac"]]},{"id":"57bbf57c.a4c3ac","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Coats of arms 1.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Coats of arms 1.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":891,"y":2560,"wires":[[]]},{"id":"bad57f24.d7265","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":501,"y":2600,"wires":[["b46760b2.5ed18"]]},{"id":"b46760b2.5ed18","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":701,"y":2600,"wires":[["e8b06dcc.1c39e"]]},{"id":"e8b06dcc.1c39e","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Coats of arms 2.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Coats of arms 2.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":891,"y":2600,"wires":[[]]},{"id":"4f9a8c27.4bc384","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":493,"y":2780,"wires":[["c48662c7.951af"]]},{"id":"c48662c7.951af","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":693,"y":2780,"wires":[["fcf0f0a.977991"]]},{"id":"fcf0f0a.977991","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Barrel 1.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Barrel 1.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":883,"y":2780,"wires":[[]]},{"id":"40000717.521ee8","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":493,"y":2820,"wires":[["4aa67e0b.87fd4"]]},{"id":"4aa67e0b.87fd4","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":693,"y":2820,"wires":[["30b4fa74.f45756"]]},{"id":"30b4fa74.f45756","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Barrel 2.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Barrel 2.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":883,"y":2820,"wires":[[]]},{"id":"f5976f1f.16155","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":446,"y":2500,"wires":[]},{"id":"7a7fb86.0070848","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":446,"y":2660,"wires":[]},{"id":"eb25e832.3ee578","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":438,"y":2720,"wires":[]},{"id":"eb7ae210.0594a","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":426,"y":2880,"wires":[]},{"id":"1dba5e3c.acedc2","type":"ui_button","z":"aff38e5d.d751b","name":"h_sticks1","group":"a210fd84.28e45","order":25,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-comment-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":274,"y":3080,"wires":[["f43aa187.da4d1","6ee0eba0.0472a4"]]},{"id":"32054b8a.591464","type":"ui_button","z":"aff38e5d.d751b","name":"h_sticks2","group":"a210fd84.28e45","order":26,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-commenting-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":274,"y":3120,"wires":[["7569cfe9.9ba89","79ec6fd5.cb51c"]]},{"id":"eb46eb8a.088ce8","type":"ui_button","z":"aff38e5d.d751b","name":"h_map1","group":"a210fd84.28e45","order":28,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-comment-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":268,"y":3300,"wires":[["f34d1de0.3058a","297c807d.b6a2d"]]},{"id":"dc9b120b.d5221","type":"ui_button","z":"aff38e5d.d751b","name":"h_map2","group":"a210fd84.28e45","order":29,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-commenting-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":268,"y":3340,"wires":[["d4020f4f.ecb89","88f9bdb1.49faf"]]},{"id":"f43aa187.da4d1","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":478,"y":3080,"wires":[["5212d6f6.14cf48"]]},{"id":"5212d6f6.14cf48","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":678,"y":3080,"wires":[["d3f3d0eb.e3f56"]]},{"id":"d3f3d0eb.e3f56","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Sticks 1.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Sticks 1.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":868,"y":3080,"wires":[[]]},{"id":"7569cfe9.9ba89","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":478,"y":3120,"wires":[["ff395cb3.46e86"]]},{"id":"ff395cb3.46e86","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":678,"y":3120,"wires":[["30d47775.d86df8"]]},{"id":"30d47775.d86df8","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Sticks 2.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Sticks 2.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":868,"y":3120,"wires":[[]]},{"id":"f34d1de0.3058a","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":3300,"wires":[["ed422ecb.54955"]]},{"id":"ed422ecb.54955","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":670,"y":3300,"wires":[["9ea04501.c051d8"]]},{"id":"9ea04501.c051d8","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Map 1.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Map 1.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":860,"y":3300,"wires":[[]]},{"id":"d4020f4f.ecb89","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":3340,"wires":[["5cf7402d.4d66c"]]},{"id":"5cf7402d.4d66c","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":670,"y":3340,"wires":[["fdae52ea.b9057"]]},{"id":"fdae52ea.b9057","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Map 2.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Map 2.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":860,"y":3340,"wires":[[]]},{"id":"6ee0eba0.0472a4","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":423,"y":3020,"wires":[]},{"id":"79ec6fd5.cb51c","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":423,"y":3180,"wires":[]},{"id":"297c807d.b6a2d","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":415,"y":3240,"wires":[]},{"id":"88f9bdb1.49faf","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":403,"y":3400,"wires":[]},{"id":"8147e442.03cae8","type":"ui_button","z":"aff38e5d.d751b","name":"h_corks1","group":"a210fd84.28e45","order":38,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-comment-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":268,"y":3520,"wires":[["763a264a.0a0e78","4cc4eb80.145e74"]]},{"id":"949b513a.b57d1","type":"ui_button","z":"aff38e5d.d751b","name":"h_corks2","group":"a210fd84.28e45","order":39,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-commenting-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":268,"y":3560,"wires":[["74ad8fe8.1210b","d3d7da1b.760268"]]},{"id":"644d3ce3.beb964","type":"ui_button","z":"aff38e5d.d751b","name":"h_lastBottle1","group":"a210fd84.28e45","order":44,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-comment-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":272,"y":3740,"wires":[["5ac09d59.59ce34","3503cf54.ec5f4"]]},{"id":"36b7178d.8b4d28","type":"ui_button","z":"aff38e5d.d751b","name":"h_lastBottle2","group":"a210fd84.28e45","order":45,"width":1,"height":1,"passthru":false,"label":"","tooltip":"","color":"silver","bgcolor":"","icon":"fa-commenting-o fa-2x","payload":"true","payloadType":"bool","topic":"","x":272,"y":3780,"wires":[["46283e9c.293a8","504c896d.e191f8"]]},{"id":"763a264a.0a0e78","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":475,"y":3520,"wires":[["1b09d4b7.ee807b"]]},{"id":"1b09d4b7.ee807b","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":675,"y":3520,"wires":[["9c6747e3.0c9fb8"]]},{"id":"9c6747e3.0c9fb8","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Corks 1.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Corks 1.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":865,"y":3520,"wires":[[]]},{"id":"74ad8fe8.1210b","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":475,"y":3560,"wires":[["d3e88e76.707b8"]]},{"id":"d3e88e76.707b8","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":675,"y":3560,"wires":[["25722f05.4987d"]]},{"id":"25722f05.4987d","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Corks 2.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Corks 2.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":865,"y":3560,"wires":[[]]},{"id":"5ac09d59.59ce34","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":467,"y":3740,"wires":[["3094809f.1b859"]]},{"id":"3094809f.1b859","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":667,"y":3740,"wires":[["3b0b0aa3.833976"]]},{"id":"3b0b0aa3.833976","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Last Bottle 1.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Last Bottle 1.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":857,"y":3740,"wires":[[]]},{"id":"46283e9c.293a8","type":"function","z":"aff38e5d.d751b","name":"check_lang","func":"var lang_code = global.get('lang_code');\nmsg.lang_code = lang_code;\nreturn msg;","outputs":1,"noerr":0,"x":467,"y":3780,"wires":[["61c3b03a.5fb15"]]},{"id":"61c3b03a.5fb15","type":"delay","z":"aff38e5d.d751b","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":667,"y":3780,"wires":[["92b7b36b.25a49"]]},{"id":"92b7b36b.25a49","type":"python-function","z":"aff38e5d.d751b","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Last Bottle 2.mp3\"\ntrack2 = \"/media/pi/MP3/GAME/FR/Last Bottle 2.mp3\"\nif msg['lang_code'] == 1:\n    player1 = Popen(['omxplayer', track1])\nif msg['lang_code'] == 2:\n    player1 = Popen(['omxplayer', track2])","outputs":1,"x":857,"y":3780,"wires":[[]]},{"id":"4cc4eb80.145e74","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":420,"y":3460,"wires":[]},{"id":"d3d7da1b.760268","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":420,"y":3620,"wires":[]},{"id":"3503cf54.ec5f4","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":412,"y":3680,"wires":[]},{"id":"504c896d.e191f8","type":"link out","z":"aff38e5d.d751b","name":"","links":["ac3cc4ee.7e3c98"],"x":400,"y":3840,"wires":[]},{"id":"785149c9.6c9288","type":"mqtt out","z":"a469dc94.42301","name":"","topic":"/client_65_sub","qos":"0","retain":"false","broker":"b7b72d02.5032c","x":820,"y":1300,"wires":[]},{"id":"e3b8c876.18c358","type":"delay","z":"a469dc94.42301","name":"","pauseType":"delay","timeout":"11","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":630,"y":1300,"wires":[["785149c9.6c9288"]]},{"id":"e6fe5124.67bc5","type":"mqtt out","z":"a469dc94.42301","name":"","topic":"/client_66_sub","qos":"0","retain":"false","broker":"b7b72d02.5032c","x":820,"y":1340,"wires":[]},{"id":"32d1a685.99c75a","type":"delay","z":"a469dc94.42301","name":"","pauseType":"delay","timeout":"13","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":630,"y":1340,"wires":[["e6fe5124.67bc5"]]},{"id":"561ee5ae.a6616c","type":"ui_switch","z":"a469dc94.42301","name":"link tabblePuzzle","label":"","tooltip":"","group":"f7e87146.ea8df","order":7,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-link fa-2x","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-unlink fa-2x","offcolor":"orangered","x":1050,"y":2340,"wires":[[]]},{"id":"6576c801.7ec1c8","type":"comment","z":"a469dc94.42301","name":"link state tabblePuzzle","info":"","x":280,"y":2160,"wires":[]},{"id":"8a42b172.cac83","type":"mqtt in","z":"a469dc94.42301","name":"","topic":"/client_63_pub","qos":"0","datatype":"auto","broker":"b7b72d02.5032c","x":260,"y":2320,"wires":[["e2034474.951908"]]},{"id":"47fdf352.4bfd3c","type":"ui_text","z":"a469dc94.42301","group":"f7e87146.ea8df","order":6,"width":7,"height":1,"name":"link state: client_63(tabblePuzzle)","label":"client_63(tabblePuzzle): ","format":"{{msg.text}}","layout":"row-right","x":1110,"y":2300,"wires":[]},{"id":"4fd31905.88a8b8","type":"inject","z":"a469dc94.42301","name":"","topic":"","payload":"30","payloadType":"str","repeat":"7","crontab":"","once":true,"onceDelay":"3.8","x":250,"y":2220,"wires":[["b2bbd1cc.63205"]]},{"id":"b0e9d971.dd8468","type":"mqtt out","z":"a469dc94.42301","name":"","topic":"/client_63_sub","qos":"0","retain":"false","broker":"b7b72d02.5032c","x":820,"y":2220,"wires":[]},{"id":"68d17f30.6eb05","type":"function","z":"a469dc94.42301","name":"check_link_b","func":"var link_counter = flow.get('link_counter_b') || 0;\n\nif(msg.payload == \"30\")\n{\n    link_counter = (link_counter < 2) ? link_counter + 1 : 2;\n}\n\nif(msg.payload == \"31\")\n{\n    link_counter = 0;\n}\n\nflow.set('link_counter_b', link_counter);\nmsg.link = link_counter;\n\nif(link_counter <= 1)\n{\n    msg.payload = true;\n    msg.text = \"on-line\";\n    return msg;\n}\nelse\n{\n    msg.payload = false;\n    msg.text = \"off-line\";\n    return msg;\n}\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":2320,"wires":[["47fdf352.4bfd3c","561ee5ae.a6616c","bc0f4f6d.a89a2"]]},{"id":"e2034474.951908","type":"delay","z":"a469dc94.42301","name":"","pauseType":"delay","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":590,"y":2320,"wires":[["68d17f30.6eb05"]]},{"id":"e8be5ac4.ef8b38","type":"link in","z":"a469dc94.42301","name":"","links":["d35949cd.0cb588"],"x":695,"y":2260,"wires":[["b0e9d971.dd8468","68d17f30.6eb05"]]},{"id":"bc0f4f6d.a89a2","type":"link out","z":"a469dc94.42301","name":"tabblePuzzle_link_state","links":["15b915a0.829aaa"],"x":995,"y":2420,"wires":[]},{"id":"b2bbd1cc.63205","type":"delay","z":"a469dc94.42301","name":"","pauseType":"random","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"300","randomLast":"700","randomUnits":"milliseconds","drop":false,"x":500,"y":2220,"wires":[["b0e9d971.dd8468","68d17f30.6eb05"]]},{"id":"ea2ef485.e990b8","type":"ui_switch","z":"a469dc94.42301","name":"link BarrelWall","label":"","tooltip":"","group":"f7e87146.ea8df","order":9,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-link fa-2x","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-unlink fa-2x","offcolor":"orangered","x":1040,"y":2660,"wires":[[]]},{"id":"6de070e8.474d","type":"comment","z":"a469dc94.42301","name":"link state BarrelWall","info":"","x":270,"y":2480,"wires":[]},{"id":"3be4a779.18dd18","type":"mqtt in","z":"a469dc94.42301","name":"","topic":"/client_64_pub","qos":"0","datatype":"auto","broker":"b7b72d02.5032c","x":260,"y":2640,"wires":[["b7627fbc.2d17d"]]},{"id":"29a9bb00.30e316","type":"ui_text","z":"a469dc94.42301","group":"f7e87146.ea8df","order":8,"width":7,"height":1,"name":"link state: client_64(BarrelWall)","label":"client_64(BarrelWall): ","format":"{{msg.text}}","layout":"row-right","x":1100,"y":2620,"wires":[]},{"id":"d08baf85.bceaa","type":"inject","z":"a469dc94.42301","name":"","topic":"","payload":"30","payloadType":"str","repeat":"7","crontab":"","once":true,"onceDelay":"3.8","x":250,"y":2540,"wires":[["f85ee300.3588c"]]},{"id":"b78a169d.997468","type":"mqtt out","z":"a469dc94.42301","name":"","topic":"/client_64_sub","qos":"0","retain":"false","broker":"b7b72d02.5032c","x":820,"y":2540,"wires":[]},{"id":"dd1a6174.5abd2","type":"function","z":"a469dc94.42301","name":"check_link_2","func":"var link_counter = flow.get('link_counter_c') || 0;\n\nif(msg.payload == \"30\")\n{\n    link_counter = (link_counter < 2) ? link_counter + 1 : 2;\n}\n\nif(msg.payload == \"31\")\n{\n    link_counter = 0;\n}\n\nflow.set('link_counter_c', link_counter);\nmsg.link = link_counter;\n\nif(link_counter <= 1)\n{\n    msg.payload = true;\n    msg.text = \"on-line\";\n    return msg;\n}\nelse\n{\n    msg.payload = false;\n    msg.text = \"off-line\";\n    return msg;\n}\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":2640,"wires":[["29a9bb00.30e316","ea2ef485.e990b8","b34e299e.a18c98"]]},{"id":"b7627fbc.2d17d","type":"delay","z":"a469dc94.42301","name":"","pauseType":"delay","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":590,"y":2640,"wires":[["dd1a6174.5abd2"]]},{"id":"cb060543.315728","type":"link in","z":"a469dc94.42301","name":"","links":["d35949cd.0cb588"],"x":695,"y":2580,"wires":[["b78a169d.997468","dd1a6174.5abd2"]]},{"id":"b34e299e.a18c98","type":"link out","z":"a469dc94.42301","name":"BarrelWall_link_state","links":["557942ba.d967ac"],"x":995,"y":2740,"wires":[]},{"id":"f85ee300.3588c","type":"delay","z":"a469dc94.42301","name":"","pauseType":"random","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"300","randomLast":"700","randomUnits":"milliseconds","drop":false,"x":500,"y":2540,"wires":[["b78a169d.997468","dd1a6174.5abd2"]]},{"id":"1267d6bf.29fb59","type":"ui_switch","z":"a469dc94.42301","name":"link Barrel","label":"","tooltip":"","group":"f7e87146.ea8df","order":11,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-link fa-2x","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-unlink fa-2x","offcolor":"orangered","x":1000,"y":2960,"wires":[[]]},{"id":"606e6fca.c28ed","type":"comment","z":"a469dc94.42301","name":"link state Barrel","info":"","x":240,"y":2780,"wires":[]},{"id":"3cb8189e.2679c8","type":"mqtt in","z":"a469dc94.42301","name":"","topic":"/client_65_pub","qos":"0","datatype":"auto","broker":"b7b72d02.5032c","x":240,"y":2940,"wires":[["5da238f3.631a68"]]},{"id":"c5b70a2.0df7af8","type":"ui_text","z":"a469dc94.42301","group":"f7e87146.ea8df","order":10,"width":7,"height":1,"name":"link state: client_65(Barrel)","label":"client_65(Barrel): ","format":"{{msg.text}}","layout":"row-right","x":1070,"y":2920,"wires":[]},{"id":"7495bc89.7903c4","type":"inject","z":"a469dc94.42301","name":"","topic":"","payload":"30","payloadType":"str","repeat":"7","crontab":"","once":true,"onceDelay":"3.8","x":230,"y":2840,"wires":[["2d7617fb.b2a2e8"]]},{"id":"46f5767d.3016d8","type":"mqtt out","z":"a469dc94.42301","name":"","topic":"/client_65_sub","qos":"0","retain":"false","broker":"b7b72d02.5032c","x":800,"y":2840,"wires":[]},{"id":"623702a1.4d6bdc","type":"function","z":"a469dc94.42301","name":"check_link_d","func":"var link_counter = flow.get('link_counter_d') || 0;\n\nif(msg.payload == \"30\")\n{\n    link_counter = (link_counter < 2) ? link_counter + 1 : 2;\n}\n\nif(msg.payload == \"31\")\n{\n    link_counter = 0;\n}\n\nflow.set('link_counter_d', link_counter);\nmsg.link = link_counter;\n\nif(link_counter <= 1)\n{\n    msg.payload = true;\n    msg.text = \"on-line\";\n    return msg;\n}\nelse\n{\n    msg.payload = false;\n    msg.text = \"off-line\";\n    return msg;\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":2940,"wires":[["c5b70a2.0df7af8","1267d6bf.29fb59","c4fcbd1b.83e16"]]},{"id":"5da238f3.631a68","type":"delay","z":"a469dc94.42301","name":"","pauseType":"delay","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":570,"y":2940,"wires":[["623702a1.4d6bdc"]]},{"id":"14face57.cadce2","type":"link in","z":"a469dc94.42301","name":"","links":["d35949cd.0cb588"],"x":675,"y":2880,"wires":[["46f5767d.3016d8","623702a1.4d6bdc"]]},{"id":"c4fcbd1b.83e16","type":"link out","z":"a469dc94.42301","name":"Barrel_link_state","links":["52aacfc3.1ae4d"],"x":975,"y":3040,"wires":[]},{"id":"2d7617fb.b2a2e8","type":"delay","z":"a469dc94.42301","name":"","pauseType":"random","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"300","randomLast":"700","randomUnits":"milliseconds","drop":false,"x":480,"y":2840,"wires":[["46f5767d.3016d8","623702a1.4d6bdc"]]},{"id":"4972f3a3.14f94c","type":"ui_switch","z":"a469dc94.42301","name":"link shakerDubble","label":"","tooltip":"","group":"f7e87146.ea8df","order":13,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-link fa-2x","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-unlink fa-2x","offcolor":"orangered","x":1030,"y":3280,"wires":[[]]},{"id":"2f8157b0.1f19c8","type":"comment","z":"a469dc94.42301","name":"link state shakerDubble","info":"","x":260,"y":3100,"wires":[]},{"id":"9d6e99f7.9cae78","type":"mqtt in","z":"a469dc94.42301","name":"","topic":"/client_66_pub","qos":"0","datatype":"auto","broker":"b7b72d02.5032c","x":240,"y":3260,"wires":[["5be39af.bd42f64"]]},{"id":"3bab8513.4c78aa","type":"ui_text","z":"a469dc94.42301","group":"f7e87146.ea8df","order":12,"width":7,"height":1,"name":"link state: client_66(shakerDubble)","label":"client_66(shakerDubble): ","format":"{{msg.text}}","layout":"row-right","x":1090,"y":3240,"wires":[]},{"id":"45c701c6.bed59","type":"inject","z":"a469dc94.42301","name":"","topic":"","payload":"30","payloadType":"str","repeat":"7","crontab":"","once":true,"onceDelay":"3.8","x":230,"y":3160,"wires":[["fdb7b812.42e5c8"]]},{"id":"c5073b77.11f9c8","type":"mqtt out","z":"a469dc94.42301","name":"","topic":"/client_66_sub","qos":"0","retain":"false","broker":"b7b72d02.5032c","x":800,"y":3160,"wires":[]},{"id":"17d8eb2f.194aa5","type":"function","z":"a469dc94.42301","name":"check_link_e","func":"var link_counter = flow.get('link_counter_e') || 0;\n\nif(msg.payload == \"30\")\n{\n    link_counter = (link_counter < 2) ? link_counter + 1 : 2;\n}\n\nif(msg.payload == \"31\")\n{\n    link_counter = 0;\n}\n\nflow.set('link_counter_e', link_counter);\nmsg.link = link_counter;\n\nif(link_counter <= 1)\n{\n    msg.payload = true;\n    msg.text = \"on-line\";\n    return msg;\n}\nelse\n{\n    msg.payload = false;\n    msg.text = \"off-line\";\n    return msg;\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":3260,"wires":[["3bab8513.4c78aa","4972f3a3.14f94c","52a32de3.012664"]]},{"id":"5be39af.bd42f64","type":"delay","z":"a469dc94.42301","name":"","pauseType":"delay","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":570,"y":3260,"wires":[["17d8eb2f.194aa5"]]},{"id":"a634a168.fec11","type":"link in","z":"a469dc94.42301","name":"","links":["d35949cd.0cb588"],"x":675,"y":3200,"wires":[["c5073b77.11f9c8","17d8eb2f.194aa5"]]},{"id":"52a32de3.012664","type":"link out","z":"a469dc94.42301","name":"shakerDubble_link_state","links":["90a7fbe.b7f1a08","b6238a67.082e68"],"x":975,"y":3360,"wires":[]},{"id":"fdb7b812.42e5c8","type":"delay","z":"a469dc94.42301","name":"","pauseType":"random","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"300","randomLast":"700","randomUnits":"milliseconds","drop":false,"x":480,"y":3160,"wires":[["c5073b77.11f9c8","17d8eb2f.194aa5"]]},{"id":"f239835d.9dd2d","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1810,"y":360,"wires":[["762e72e3.0d2ccc"]]},{"id":"a2e8cead.9f38b","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"150","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1810,"y":400,"wires":[["5d845be7.f52394"]]},{"id":"c55c6b9.fcf0498","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"350","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1810,"y":460,"wires":[["9bfcb5fa.8c2cb8"]]},{"id":"b974862f.da3e38","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"400","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1810,"y":520,"wires":[["2e65b80c.70a3d8"]]},{"id":"fd7dba90.bbc3b8","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"450","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1810,"y":560,"wires":[["33a601e5.2df44e"]]},{"id":"df6cf136.ec727","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1810,"y":600,"wires":[["94d83fce.def37"]]},{"id":"d8032df4.4ceba","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"550","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1810,"y":640,"wires":[["554e93e0.91442c"]]},{"id":"762e72e3.0d2ccc","type":"function","z":"ed820623.bf0ea8","name":"light_white_room_1_on","func":"msg.payload = \"light_lamp_room_11_12_110\";\nreturn msg;","outputs":1,"noerr":0,"x":2050,"y":360,"wires":[["76636592.d5c80c"]]},{"id":"5d845be7.f52394","type":"function","z":"ed820623.bf0ea8","name":"light_gerbs_on","func":"msg.payload = \"light_gerbs_110\";\nreturn msg;","outputs":1,"noerr":0,"x":2020,"y":400,"wires":[["76636592.d5c80c"]]},{"id":"2e65b80c.70a3d8","type":"function","z":"ed820623.bf0ea8","name":"LOCK_WINE_RACK","func":"msg.payload = \"340\"\nreturn msg;","outputs":1,"noerr":0,"x":2040,"y":520,"wires":[["76636592.d5c80c"]]},{"id":"94d83fce.def37","type":"function","z":"ed820623.bf0ea8","name":"LOCK_BARREL","func":"msg.payload = \"344\"\nreturn msg;","outputs":1,"noerr":0,"x":2020,"y":600,"wires":[["76636592.d5c80c"]]},{"id":"554e93e0.91442c","type":"function","z":"ed820623.bf0ea8","name":"LOCK_BARREL_WALL","func":"msg.payload = \"346\"\nreturn msg;","outputs":1,"noerr":0,"x":2050,"y":640,"wires":[["76636592.d5c80c"]]},{"id":"33a601e5.2df44e","type":"function","z":"ed820623.bf0ea8","name":"LOCK_TABLE","func":"msg.payload = \"342\"\nreturn msg;","outputs":1,"noerr":0,"x":2020,"y":560,"wires":[["76636592.d5c80c"]]},{"id":"9bfcb5fa.8c2cb8","type":"function","z":"ed820623.bf0ea8","name":"light_bottle_on","func":"msg.payload = \"light_bottle_110\"\nreturn msg;","outputs":1,"noerr":0,"x":2020,"y":460,"wires":[["76636592.d5c80c"]]},{"id":"eff0d8a4.ce5768","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":390,"y":1360,"wires":[["e1431d52.4dfc"]]},{"id":"30b32590.59964a","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"150","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":390,"y":1400,"wires":[["a27388be.b94df8"]]},{"id":"5220571b.756ad8","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"350","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":390,"y":1460,"wires":[["ebb5476a.e89578"]]},{"id":"69d99a17.2bda14","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"400","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":390,"y":1520,"wires":[["d866ad36.d3cc2"]]},{"id":"9700055a.5cab58","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"450","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":390,"y":1560,"wires":[["660f8bec.9eaa14"]]},{"id":"5449ad55.cc50f4","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":390,"y":1600,"wires":[["a8dd59a5.e7a4c8"]]},{"id":"1c1d0bbf.8d66f4","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"550","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":390,"y":1640,"wires":[["38d0c691.9d441a"]]},{"id":"e1431d52.4dfc","type":"function","z":"ed820623.bf0ea8","name":"light_white_room_1_off","func":"msg.payload = \"light_lamp_room_11_12_0\";\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":1360,"wires":[["ee99c279.57e42"]]},{"id":"a27388be.b94df8","type":"function","z":"ed820623.bf0ea8","name":"light_gerbs_off","func":"msg.payload = \"light_gerbs_0\";\nreturn msg;","outputs":1,"noerr":0,"x":600,"y":1400,"wires":[["ee99c279.57e42"]]},{"id":"d866ad36.d3cc2","type":"function","z":"ed820623.bf0ea8","name":"UNLOCK_WINE_RACK","func":"msg.payload = \"341\"\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":1520,"wires":[["ee99c279.57e42"]]},{"id":"a8dd59a5.e7a4c8","type":"function","z":"ed820623.bf0ea8","name":"UNLOCK_BARREL","func":"msg.payload = \"345\"\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":1600,"wires":[["ee99c279.57e42"]]},{"id":"38d0c691.9d441a","type":"function","z":"ed820623.bf0ea8","name":"UNLOCK_BARREL_WALL","func":"msg.payload = \"347\"\nreturn msg;","outputs":1,"noerr":0,"x":640,"y":1640,"wires":[["ee99c279.57e42"]]},{"id":"660f8bec.9eaa14","type":"function","z":"ed820623.bf0ea8","name":"UNLOCK_TABLE","func":"msg.payload = \"343\"\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":1560,"wires":[["ee99c279.57e42"]]},{"id":"ebb5476a.e89578","type":"function","z":"ed820623.bf0ea8","name":"light_bottle_off","func":"msg.payload = \"light_bottle_0\"\nreturn msg;","outputs":1,"noerr":0,"x":600,"y":1460,"wires":[["ee99c279.57e42"]]},{"id":"46ecc7ec.94bd98","type":"link in","z":"c35904a3.a08f28","name":"","links":["8918313e.7d944"],"x":135,"y":920,"wires":[["afb76610.6b7848"]]},{"id":"afb76610.6b7848","type":"function","z":"c35904a3.a08f28","name":"func_door_portal_state","func":"if(msg.payload === true)\n{\n    msg.background = 0;\n    return msg;\n}\nelse if(msg.payload === false)\n{\n    msg.background = \"#FF0000\";\n    return msg;\n}","outputs":1,"noerr":0,"x":300,"y":920,"wires":[["f8eb2423.68f788"]]},{"id":"f8eb2423.68f788","type":"ui_button","z":"c35904a3.a08f28","name":"Wine Rack S","group":"e3d56fa7.f1697","order":15,"width":3,"height":1,"passthru":false,"label":"Wine Rack","tooltip":"","color":"silver","bgcolor":"{{background}}","icon":"fa-magic","payload":"solved","payloadType":"str","topic":"","x":510,"y":920,"wires":[["815da440.f7a008","1ce66719.7a8ad9","9ebd0dc6.87ce7"]]},{"id":"8cd1aec7.f4cef","type":"ui_switch","z":"c35904a3.a08f28","name":"wr1","label":"","tooltip":"","group":"e3d56fa7.f1697","order":1,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check ","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":590,"y":320,"wires":[[]]},{"id":"ab422504.c22738","type":"mqtt in","z":"c35904a3.a08f28","name":"","topic":"/client_62_err_pub","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":230,"y":520,"wires":[["c1c5f967.46fc08","3ffc72be.e65a9e","fda0c014.f58dc","9d4fa96d.728158","6a9685f8.6ea6bc","415ed1e2.da59c","d024821d.36f4","6077d7ae.eb6018","bed0b6bc.be4588","982d170.7843de8","e96c9c88.123d8","572ef1ac.0f216"]]},{"id":"157987c0.f9ef98","type":"ui_switch","z":"c35904a3.a08f28","name":"wr2","label":"","tooltip":"","group":"e3d56fa7.f1697","order":2,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check ","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":590,"y":360,"wires":[[]]},{"id":"44db39d9.f15728","type":"ui_switch","z":"c35904a3.a08f28","name":"wr3","label":"","tooltip":"","group":"e3d56fa7.f1697","order":3,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check ","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":590,"y":400,"wires":[[]]},{"id":"5a4d2a18.852c64","type":"ui_switch","z":"c35904a3.a08f28","name":"wr4","label":"","tooltip":"","group":"e3d56fa7.f1697","order":4,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check ","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":590,"y":440,"wires":[[]]},{"id":"676338f4.82e588","type":"ui_switch","z":"c35904a3.a08f28","name":"wr5","label":"","tooltip":"","group":"e3d56fa7.f1697","order":5,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check ","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":590,"y":480,"wires":[[]]},{"id":"8d1ee960.d4ab28","type":"ui_switch","z":"c35904a3.a08f28","name":"wr6","label":"","tooltip":"","group":"e3d56fa7.f1697","order":6,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check ","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":590,"y":520,"wires":[[]]},{"id":"4db15b50.4c4e24","type":"ui_switch","z":"c35904a3.a08f28","name":"wr7","label":"","tooltip":"","group":"e3d56fa7.f1697","order":7,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":590,"y":560,"wires":[[]]},{"id":"4bc4f917.8a91f8","type":"ui_switch","z":"c35904a3.a08f28","name":"wr8","label":"","tooltip":"","group":"e3d56fa7.f1697","order":8,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check ","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":590,"y":600,"wires":[[]]},{"id":"5c7c76b4.b73308","type":"ui_switch","z":"c35904a3.a08f28","name":"wr9","label":"","tooltip":"","group":"e3d56fa7.f1697","order":9,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check ","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":590,"y":640,"wires":[[]]},{"id":"2744ac62.d10b64","type":"ui_switch","z":"c35904a3.a08f28","name":"wr10","label":"","tooltip":"","group":"e3d56fa7.f1697","order":10,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check ","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":590,"y":680,"wires":[[]]},{"id":"f2a3dd13.43d0c","type":"ui_switch","z":"c35904a3.a08f28","name":"wr11","label":"","tooltip":"","group":"e3d56fa7.f1697","order":11,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":590,"y":720,"wires":[[]]},{"id":"4acf9d3f.063d64","type":"ui_switch","z":"c35904a3.a08f28","name":"wr12","label":"","tooltip":"","group":"e3d56fa7.f1697","order":12,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check ","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":590,"y":760,"wires":[[]]},{"id":"815da440.f7a008","type":"ui_switch","z":"c35904a3.a08f28","name":"wrSolved","label":"","tooltip":"","group":"e3d56fa7.f1697","order":16,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"solved","onvalueType":"str","onicon":"fa-check  fa-2x","oncolor":"olivedrab","offvalue":"restarted","offvalueType":"str","officon":"fa-close","offcolor":"dimgrey","x":480,"y":820,"wires":[[]]},{"id":"c1c5f967.46fc08","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 2){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":449,"y":321,"wires":[["8cd1aec7.f4cef"]]},{"id":"572ef1ac.0f216","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 1){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":360,"wires":[["157987c0.f9ef98"]]},{"id":"e96c9c88.123d8","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 8){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":400,"wires":[["44db39d9.f15728"]]},{"id":"982d170.7843de8","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 64){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":440,"wires":[["5a4d2a18.852c64"]]},{"id":"bed0b6bc.be4588","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 1024){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":480,"wires":[["676338f4.82e588"]]},{"id":"6077d7ae.eb6018","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 128){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":520,"wires":[["8d1ee960.d4ab28"]]},{"id":"d024821d.36f4","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 512){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":560,"wires":[["4db15b50.4c4e24"]]},{"id":"415ed1e2.da59c","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 16){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":600,"wires":[["4bc4f917.8a91f8"]]},{"id":"6a9685f8.6ea6bc","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 32){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":640,"wires":[["5c7c76b4.b73308"]]},{"id":"9d4fa96d.728158","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 256){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":680,"wires":[["2744ac62.d10b64"]]},{"id":"fda0c014.f58dc","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 2048){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":720,"wires":[["f2a3dd13.43d0c"]]},{"id":"3ffc72be.e65a9e","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 4){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":760,"wires":[["4acf9d3f.063d64"]]},{"id":"7bfac8f7.610688","type":"mqtt in","z":"c35904a3.a08f28","name":"","topic":"/client_62_pub","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":200,"y":860,"wires":[["815da440.f7a008","9ebd0dc6.87ce7"]]},{"id":"5780c292.38900c","type":"mqtt out","z":"c35904a3.a08f28","name":"","topic":"/client_62_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":660,"y":1060,"wires":[]},{"id":"1ce66719.7a8ad9","type":"function","z":"c35904a3.a08f28","name":"send SOLVE","func":"if(msg.payload == 'solved') {\n    msg.payload = 'solve';\n    return msg;\n}","outputs":1,"noerr":0,"x":490,"y":980,"wires":[["5780c292.38900c"]]},{"id":"96b15036.decdf","type":"link in","z":"c35904a3.a08f28","name":"","links":["60656c9d.08dc34"],"x":95,"y":1000,"wires":[["c48f0574.2705b8"]]},{"id":"c48f0574.2705b8","type":"function","z":"c35904a3.a08f28","name":"restart","func":"msg.payload = 'restart'\nreturn msg;","outputs":1,"noerr":0,"x":190,"y":1000,"wires":[["c55ab5dd.308918"]]},{"id":"c55ab5dd.308918","type":"function","z":"c35904a3.a08f28","name":"restarted","func":"msg.payload = \"restarted\"\nreturn msg;","outputs":1,"noerr":0,"x":300,"y":960,"wires":[["815da440.f7a008"]]},{"id":"2ea95463.10827c","type":"comment","z":"c35904a3.a08f28","name":"Wine Rack","info":"","x":200,"y":320,"wires":[]},{"id":"15b915a0.829aaa","type":"link in","z":"c35904a3.a08f28","name":"","links":["bc0f4f6d.a89a2"],"x":1015,"y":1040,"wires":[["222846ec.b0d44a"]]},{"id":"222846ec.b0d44a","type":"function","z":"c35904a3.a08f28","name":"func_table_puzzle_state","func":"if(msg.payload === true)\n{\n    msg.background = 0;\n    return msg;\n}\nelse if(msg.payload === false)\n{\n    msg.background = \"#FF0000\";\n    return msg;\n}","outputs":1,"noerr":0,"x":1190,"y":1040,"wires":[["5ad1fadb.2692d4"]]},{"id":"5ad1fadb.2692d4","type":"ui_button","z":"c35904a3.a08f28","name":"Tabble Puzzle S","group":"e3d56fa7.f1697","order":36,"width":3,"height":1,"passthru":false,"label":"Tabble Puzzle","tooltip":"","color":"silver","bgcolor":"{{background}}","icon":"fa-magic","payload":"solved","payloadType":"str","topic":"","x":1400,"y":1040,"wires":[["5f209615.ab67b8","fe1e2629.f53e88","f5249368.f9432"]]},{"id":"8f35e5f0.099578","type":"ui_switch","z":"c35904a3.a08f28","name":"tp1","label":"","tooltip":"","group":"e3d56fa7.f1697","order":22,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check ","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":1470,"y":320,"wires":[[]]},{"id":"98327b9.c521888","type":"mqtt in","z":"c35904a3.a08f28","name":"","topic":"/client_63_err_pub","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":1110,"y":520,"wires":[["de3465f5.6ddf28","8f093306.a5f48","ae42db61.a004b8","a251909f.ee90f","bcb4676e.efe028","512df054.dfd57","5acfd896.8ea9c8","21fa94fd.c603cc","31c1f8ad.0abe78","6e48bcaa.9b1e84","99737cb.e66b08","32db2568.6c514a"]]},{"id":"408a918d.37967","type":"ui_switch","z":"c35904a3.a08f28","name":"tp2","label":"","tooltip":"","group":"e3d56fa7.f1697","order":23,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check ","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":1470,"y":360,"wires":[[]]},{"id":"6559ea59.3b9804","type":"ui_switch","z":"c35904a3.a08f28","name":"tp3","label":"","tooltip":"","group":"e3d56fa7.f1697","order":24,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check ","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":1470,"y":400,"wires":[[]]},{"id":"a87ab51b.ab3db8","type":"ui_switch","z":"c35904a3.a08f28","name":"tp4","label":"","tooltip":"","group":"e3d56fa7.f1697","order":25,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check ","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":1470,"y":440,"wires":[[]]},{"id":"d47b581.bbd13a8","type":"ui_switch","z":"c35904a3.a08f28","name":"tp5","label":"","tooltip":"","group":"e3d56fa7.f1697","order":26,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check ","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":1470,"y":480,"wires":[[]]},{"id":"11a1f56a.27acdb","type":"ui_switch","z":"c35904a3.a08f28","name":"tp6","label":"","tooltip":"","group":"e3d56fa7.f1697","order":27,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check ","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":1470,"y":520,"wires":[[]]},{"id":"59377c8c.492ca4","type":"ui_switch","z":"c35904a3.a08f28","name":"tp7","label":"","tooltip":"","group":"e3d56fa7.f1697","order":28,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check ","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":1470,"y":560,"wires":[[]]},{"id":"12caf8b5.a5df17","type":"ui_switch","z":"c35904a3.a08f28","name":"tp8","label":"","tooltip":"","group":"e3d56fa7.f1697","order":29,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":1470,"y":600,"wires":[[]]},{"id":"20ae894.ec87b76","type":"ui_switch","z":"c35904a3.a08f28","name":"tp9","label":"","tooltip":"","group":"e3d56fa7.f1697","order":30,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":1470,"y":640,"wires":[[]]},{"id":"6fd1c8fe.b3cfa8","type":"ui_switch","z":"c35904a3.a08f28","name":"tp10","label":"","tooltip":"","group":"e3d56fa7.f1697","order":31,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":1470,"y":680,"wires":[[]]},{"id":"2e171088.69f52","type":"ui_switch","z":"c35904a3.a08f28","name":"tp11","label":"","tooltip":"","group":"e3d56fa7.f1697","order":32,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":1470,"y":720,"wires":[[]]},{"id":"7bb2e875.6c6ed8","type":"ui_switch","z":"c35904a3.a08f28","name":"tp12","label":"","tooltip":"","group":"e3d56fa7.f1697","order":33,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":1470,"y":760,"wires":[[]]},{"id":"5f209615.ab67b8","type":"ui_switch","z":"c35904a3.a08f28","name":"tpSolved","label":"","tooltip":"","group":"e3d56fa7.f1697","order":37,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"solved","onvalueType":"str","onicon":"fa-check  fa-2x","oncolor":"olivedrab","offvalue":"restarted","offvalueType":"str","officon":"fa-close","offcolor":"dimgrey","x":1360,"y":960,"wires":[[]]},{"id":"de3465f5.6ddf28","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 2048){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":1330,"y":320,"wires":[["8f35e5f0.099578"]]},{"id":"32db2568.6c514a","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 1024){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":1330,"y":360,"wires":[["408a918d.37967"]]},{"id":"99737cb.e66b08","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 512){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":1330,"y":400,"wires":[["6559ea59.3b9804"]]},{"id":"6e48bcaa.9b1e84","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 256){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":1330,"y":440,"wires":[["a87ab51b.ab3db8"]]},{"id":"31c1f8ad.0abe78","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 128){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":1330,"y":480,"wires":[["d47b581.bbd13a8"]]},{"id":"21fa94fd.c603cc","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 64){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":1330,"y":520,"wires":[["11a1f56a.27acdb"]]},{"id":"5acfd896.8ea9c8","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 32){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":1330,"y":560,"wires":[["59377c8c.492ca4"]]},{"id":"512df054.dfd57","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 16){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":1330,"y":600,"wires":[["12caf8b5.a5df17"]]},{"id":"bcb4676e.efe028","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 8){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":1330,"y":640,"wires":[["20ae894.ec87b76"]]},{"id":"a251909f.ee90f","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 4){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":1330,"y":680,"wires":[["6fd1c8fe.b3cfa8"]]},{"id":"ae42db61.a004b8","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 2){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":1330,"y":720,"wires":[["2e171088.69f52"]]},{"id":"8f093306.a5f48","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 1){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":1330,"y":760,"wires":[["7bb2e875.6c6ed8"]]},{"id":"c1793bc0.a40d08","type":"mqtt in","z":"c35904a3.a08f28","name":"","topic":"/client_63_pub","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":1080,"y":980,"wires":[["5f209615.ab67b8","f5249368.f9432"]]},{"id":"2b9ec6cc.b2333a","type":"mqtt out","z":"c35904a3.a08f28","name":"","topic":"/client_63_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":1540,"y":1160,"wires":[]},{"id":"fe1e2629.f53e88","type":"function","z":"c35904a3.a08f28","name":"send SOLVE","func":"if(msg.payload == 'solved') {\n    msg.payload = 'solve';\n    return msg;\n}","outputs":1,"noerr":0,"x":1370,"y":1100,"wires":[["2b9ec6cc.b2333a"]]},{"id":"ab3e4efd.d24b7","type":"link in","z":"c35904a3.a08f28","name":"","links":["60656c9d.08dc34"],"x":975,"y":1120,"wires":[["1c353a93.0ebcb5"]]},{"id":"1c353a93.0ebcb5","type":"function","z":"c35904a3.a08f28","name":"restart","func":"msg.payload = 'restart'\nreturn msg;","outputs":1,"noerr":0,"x":1070,"y":1160,"wires":[["ed2e041.8d0d8f8"]]},{"id":"ed2e041.8d0d8f8","type":"function","z":"c35904a3.a08f28","name":"restarted","func":"msg.payload = \"restarted\"\nreturn msg;","outputs":1,"noerr":0,"x":1180,"y":1080,"wires":[["5f209615.ab67b8"]]},{"id":"1a7c5fbc.3b9cb","type":"comment","z":"c35904a3.a08f28","name":"Table Puzzle","info":"","x":1090,"y":320,"wires":[]},{"id":"557942ba.d967ac","type":"link in","z":"c35904a3.a08f28","name":"","links":["b34e299e.a18c98"],"x":1855,"y":660,"wires":[["956d4ba2.73f018"]]},{"id":"956d4ba2.73f018","type":"function","z":"c35904a3.a08f28","name":"func_barrel_wall_state","func":"if(msg.payload === true)\n{\n    msg.background = 0;\n    return msg;\n}\nelse if(msg.payload === false)\n{\n    msg.background = \"#FF0000\";\n    return msg;\n}","outputs":1,"noerr":0,"x":2000,"y":660,"wires":[["6c231359.02d1bc"]]},{"id":"6c231359.02d1bc","type":"ui_button","z":"c35904a3.a08f28","name":"Barrel Wall S","group":"a210fd84.28e45","order":40,"width":3,"height":1,"passthru":false,"label":"Barrel Wall","tooltip":"","color":"silver","bgcolor":"{{background}}","icon":"fa-magic","payload":"solved","payloadType":"str","topic":"","x":2270,"y":660,"wires":[["918cc834.df4018","7706553c.8955fc","3d131d7c.950cc2"]]},{"id":"918cc834.df4018","type":"ui_switch","z":"c35904a3.a08f28","name":"bwSolved","label":"","tooltip":"","group":"a210fd84.28e45","order":41,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"solved","onvalueType":"str","onicon":"fa-check  fa-2x","oncolor":"olivedrab","offvalue":"restarted","offvalueType":"str","officon":"fa-close","offcolor":"dimgrey","x":2240,"y":580,"wires":[[]]},{"id":"ea5eeb35.a89b78","type":"mqtt in","z":"c35904a3.a08f28","name":"","topic":"/client_64_pub","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":2040,"y":500,"wires":[["918cc834.df4018","55a09c2c.33b9d4","f3c41f98.ca7df","50e28cee.885b24","37765ffb.a0c75","7784c79c.3df0b8","af169f.945ce96","3d131d7c.950cc2"]]},{"id":"358e4a5.a33d8b6","type":"mqtt out","z":"c35904a3.a08f28","name":"","topic":"/client_64_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":2360,"y":800,"wires":[]},{"id":"7706553c.8955fc","type":"function","z":"c35904a3.a08f28","name":"send SOLVE","func":"if(msg.payload == 'solved') {\n    msg.payload = 'solve';\n    return msg;\n}","outputs":1,"noerr":0,"x":2250,"y":720,"wires":[["358e4a5.a33d8b6"]]},{"id":"3cd94e91.d2b122","type":"link in","z":"c35904a3.a08f28","name":"","links":["60656c9d.08dc34"],"x":1815,"y":780,"wires":[["ba31afe4.22f1a"]]},{"id":"ba31afe4.22f1a","type":"function","z":"c35904a3.a08f28","name":"restart","func":"msg.payload = 'restart'\nreturn msg;","outputs":1,"noerr":0,"x":1930,"y":780,"wires":[["27830943.afd3c6"]]},{"id":"27830943.afd3c6","type":"function","z":"c35904a3.a08f28","name":"restarted","func":"msg.payload = \"restarted\"\nreturn msg;","outputs":1,"noerr":0,"x":2060,"y":700,"wires":[["918cc834.df4018"]]},{"id":"60d0affb.63be6","type":"comment","z":"c35904a3.a08f28","name":"Barrel Wall","info":"","x":1920,"y":320,"wires":[]},{"id":"459cbf0c.d3ce1","type":"mqtt in","z":"a469dc94.42301","name":"","topic":"/client_64_err_pub","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":370,"y":560,"wires":[["ea97fe5.eac39"]]},{"id":"ea97fe5.eac39","type":"ui_text","z":"a469dc94.42301","group":"a210fd84.28e45","order":42,"width":0,"height":0,"name":"","label":"","format":"{{msg.payload}}","layout":"col-center","x":670,"y":560,"wires":[]},{"id":"55a09c2c.33b9d4","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload == \"out_2\")  {\n   msg.background = \"#541313\";\n   return msg;\n}\nelse if(msg.payload == \"right_2\")  {\n   msg.background = \"#006600\";\n   return msg\n}\nelse if(msg.payload == \"wrong_2\")  {\n    msg.background = \"#ff0000\";\n   return msg\n}\nelse if(msg.payload == \"unknown_2\")  {\n    msg.background = \"#000000\";\n   return msg\n}\n\n\n\n","outputs":1,"noerr":0,"x":2210,"y":240,"wires":[["6a3bbd6a.ca00a4"]]},{"id":"6a3bbd6a.ca00a4","type":"ui_button","z":"c35904a3.a08f28","name":"place_1","group":"a210fd84.28e45","order":32,"width":2,"height":1,"passthru":false,"label":"{{msg.btn_txt}}","tooltip":"","color":"silver","bgcolor":"{{background}}","icon":"fa-caret-square-o-up fa-2x","payload":"true","payloadType":"bool","topic":"","x":2340,"y":240,"wires":[[]]},{"id":"f3c41f98.ca7df","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload == \"out_3\")  {\n   msg.background = \"#541313\";\n   return msg;\n}\nelse if(msg.payload == \"right_3\")  {\n   msg.background = \"#006600\";\n   return msg\n}\nelse if(msg.payload == \"wrong_3\")  {\n    msg.background = \"#ff0000\";\n   return msg\n}\nelse if(msg.payload == \"unknown_3\")  {\n    msg.background = \"#000000\";\n   return msg\n}\n\n\n\n","outputs":1,"noerr":0,"x":2210,"y":280,"wires":[["d5ca1e98.96173"]]},{"id":"d5ca1e98.96173","type":"ui_button","z":"c35904a3.a08f28","name":"place_2","group":"a210fd84.28e45","order":33,"width":2,"height":1,"passthru":false,"label":"{{msg.btn_txt}}","tooltip":"","color":"silver","bgcolor":"{{background}}","icon":"fa-caret-square-o-up fa-2x","payload":"true","payloadType":"bool","topic":"","x":2340,"y":280,"wires":[[]]},{"id":"50e28cee.885b24","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload == \"out_1\")  {\n   msg.background = \"#541313\";\n   return msg;\n}\nelse if(msg.payload == \"right_1\")  {\n   msg.background = \"#006600\";\n   return msg\n}\nelse if(msg.payload == \"wrong_1\")  {\n    msg.background = \"#ff0000\";\n   return msg\n}\nelse if(msg.payload == \"unknown_1\")  {\n    msg.background = \"#000000\";\n   return msg\n}\n\n\n\n","outputs":1,"noerr":0,"x":2210,"y":320,"wires":[["b60c9266.92789"]]},{"id":"b60c9266.92789","type":"ui_button","z":"c35904a3.a08f28","name":"place_3","group":"a210fd84.28e45","order":34,"width":2,"height":1,"passthru":false,"label":"{{msg.btn_txt}}","tooltip":"","color":"silver","bgcolor":"{{background}}","icon":"fa-caret-square-o-up fa-2x","payload":"true","payloadType":"bool","topic":"","x":2340,"y":320,"wires":[[]]},{"id":"37765ffb.a0c75","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload == \"out_4\")  {\n   msg.background = \"#541313\";\n   return msg;\n}\nelse if(msg.payload == \"right_4\")  {\n   msg.background = \"#006600\";\n   return msg\n}\nelse if(msg.payload == \"wrong_4\")  {\n    msg.background = \"#ff0000\";\n   return msg\n}\nelse if(msg.payload == \"unknown_4\")  {\n    msg.background = \"#000000\";\n   return msg\n}\n\n\n\n","outputs":1,"noerr":0,"x":2210,"y":360,"wires":[["8d287fa9.11504"]]},{"id":"8d287fa9.11504","type":"ui_button","z":"c35904a3.a08f28","name":"place_4","group":"a210fd84.28e45","order":35,"width":2,"height":1,"passthru":false,"label":"{{msg.btn_txt}}","tooltip":"","color":"silver","bgcolor":"{{background}}","icon":"fa-caret-square-o-up fa-2x","payload":"true","payloadType":"bool","topic":"","x":2340,"y":360,"wires":[[]]},{"id":"7784c79c.3df0b8","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload == \"out_0\")  {\n   msg.background = \"#541313\";\n   return msg;\n}\nelse if(msg.payload == \"right_0\")  {\n   msg.background = \"#006600\";\n   return msg\n}\nelse if(msg.payload == \"wrong_0\")  {\n    msg.background = \"#ff0000\";\n   return msg\n}\nelse if(msg.payload == \"unknown_0\")  {\n    msg.background = \"#000000\";\n   return msg\n}\n\n\n\n","outputs":1,"noerr":0,"x":2210,"y":400,"wires":[["331e5536.e3951a"]]},{"id":"331e5536.e3951a","type":"ui_button","z":"c35904a3.a08f28","name":"place_5","group":"a210fd84.28e45","order":36,"width":2,"height":1,"passthru":false,"label":"{{msg.btn_txt}}","tooltip":"","color":"silver","bgcolor":"{{background}}","icon":"fa-caret-square-o-up fa-2x","payload":"true","payloadType":"bool","topic":"","x":2340,"y":400,"wires":[[]]},{"id":"af169f.945ce96","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload == \"out_5\")  {\n   msg.background = \"#541313\";\n   return msg;\n}\nelse if(msg.payload == \"right_5\")  {\n   msg.background = \"#006600\";\n   return msg\n}\nelse if(msg.payload == \"wrong_5\")  {\n    msg.background = \"#ff0000\";\n   return msg\n}\nelse if(msg.payload == \"unknown_5\")  {\n    msg.background = \"#000000\";\n   return msg\n}\n\n\n\n","outputs":1,"noerr":0,"x":2210,"y":440,"wires":[["be29bb1b.739918"]]},{"id":"be29bb1b.739918","type":"ui_button","z":"c35904a3.a08f28","name":"place_6","group":"a210fd84.28e45","order":37,"width":2,"height":1,"passthru":false,"label":"{{msg.btn_txt}}","tooltip":"","color":"silver","bgcolor":"{{background}}","icon":"fa-caret-square-o-up fa-2x","payload":"true","payloadType":"bool","topic":"","x":2340,"y":440,"wires":[[]]},{"id":"b0dd6e43.5262c","type":"mqtt in","z":"a469dc94.42301","name":"","topic":"/client64_rfid0","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":330,"y":660,"wires":[["77f76877.d525d8"]]},{"id":"fb6b872c.af8688","type":"mqtt in","z":"a469dc94.42301","name":"","topic":"/client64_rfid1","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":330,"y":700,"wires":[["f69c5a6c.ab8ed8"]]},{"id":"b73a47f9.61dc98","type":"mqtt in","z":"a469dc94.42301","name":"","topic":"/client64_rfid2","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":330,"y":740,"wires":[["8f43461c.c125c8"]]},{"id":"77f76877.d525d8","type":"ui_text","z":"a469dc94.42301","group":"98367be2.803378","order":3,"width":4,"height":1,"name":"barrel wall: rfid_1","label":"rfid_1: ","format":"{{msg.payload}}","layout":"row-spread","x":670,"y":660,"wires":[]},{"id":"f69c5a6c.ab8ed8","type":"ui_text","z":"a469dc94.42301","group":"98367be2.803378","order":5,"width":4,"height":1,"name":"barrel wall: rfid_2","label":"rfid_2: ","format":"{{msg.payload}}","layout":"row-spread","x":670,"y":700,"wires":[]},{"id":"8f43461c.c125c8","type":"ui_text","z":"a469dc94.42301","group":"98367be2.803378","order":7,"width":4,"height":1,"name":"barrel wall: rfid_3","label":"rfid_3: ","format":"{{msg.payload}}","layout":"row-spread","x":670,"y":740,"wires":[]},{"id":"842aa289.79e48","type":"ui_text","z":"a469dc94.42301","group":"98367be2.803378","order":9,"width":4,"height":1,"name":"barrel wall: rfid_4","label":"rfid_4: ","format":"{{msg.payload}}","layout":"row-spread","x":670,"y":780,"wires":[]},{"id":"a2f7edf8.91c5b","type":"ui_text","z":"a469dc94.42301","group":"98367be2.803378","order":11,"width":4,"height":1,"name":"barrel wall: rfid_5","label":"rfid_5: ","format":"{{msg.payload}}","layout":"row-spread","x":670,"y":820,"wires":[]},{"id":"98f4b57c.baddd8","type":"ui_text","z":"a469dc94.42301","group":"98367be2.803378","order":13,"width":4,"height":1,"name":"barrel wall: rfid_6","label":"rfid_6: ","format":"{{msg.payload}}","layout":"row-spread","x":670,"y":860,"wires":[]},{"id":"a21420d5.1c118","type":"mqtt in","z":"a469dc94.42301","name":"","topic":"/client64_rfid3","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":330,"y":780,"wires":[["842aa289.79e48"]]},{"id":"6121ebf4.1d46a4","type":"mqtt in","z":"a469dc94.42301","name":"","topic":"/client64_rfid4","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":330,"y":820,"wires":[["a2f7edf8.91c5b"]]},{"id":"caa8d813.703c88","type":"mqtt in","z":"a469dc94.42301","name":"","topic":"/client64_rfid5","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":330,"y":860,"wires":[["98f4b57c.baddd8"]]},{"id":"1f0afc08.dc36f4","type":"ui_button","z":"aff38e5d.d751b","name":"corkScrew","group":"e3d56fa7.f1697","order":20,"width":4,"height":1,"passthru":false,"label":"Corkscrew","tooltip":"","color":"silver","bgcolor":"","icon":"","payload":"true","payloadType":"bool","topic":"","x":150,"y":480,"wires":[[]]},{"id":"106c333d.ebc53d","type":"ui_button","z":"aff38e5d.d751b","name":"Coasters","group":"e3d56fa7.f1697","order":42,"width":4,"height":1,"passthru":false,"label":"Coasters","tooltip":"","color":"silver","bgcolor":"","icon":"","payload":"true","payloadType":"bool","topic":"","x":140,"y":920,"wires":[[]]},{"id":"ffd11b60.eba2b8","type":"ui_button","z":"aff38e5d.d751b","name":"Proclamation","group":"e3d56fa7.f1697","order":45,"width":4,"height":1,"passthru":false,"label":"Proclamation","tooltip":"","color":"silver","bgcolor":"","icon":"","payload":"true","payloadType":"bool","topic":"","x":150,"y":1220,"wires":[[]]},{"id":"d97f9640.214848","type":"ui_button","z":"aff38e5d.d751b","name":"Rotating Locks","group":"e3d56fa7.f1697","order":48,"width":4,"height":1,"passthru":false,"label":"Rotating Locks","tooltip":"","color":"silver","bgcolor":"","icon":"","payload":"true","payloadType":"bool","topic":"","x":140,"y":1440,"wires":[[]]},{"id":"90a7fbe.b7f1a08","type":"link in","z":"c35904a3.a08f28","name":"","links":["52a32de3.012664"],"x":75,"y":1660,"wires":[["5588198a.91b288"]]},{"id":"5588198a.91b288","type":"function","z":"c35904a3.a08f28","name":"func_shaker_double_state","func":"if(msg.payload === true)\n{\n    msg.background = 0;\n    return msg;\n}\nelse if(msg.payload === false)\n{\n    msg.background = \"#FF0000\";\n    return msg;\n}","outputs":1,"noerr":0,"x":240,"y":1660,"wires":[["5bc8b00f.3a282"]]},{"id":"5bc8b00f.3a282","type":"ui_button","z":"c35904a3.a08f28","name":"Shaker Double S","group":"e3d56fa7.f1697","order":58,"width":3,"height":1,"passthru":false,"label":"Shaker Double","tooltip":"","color":"silver","bgcolor":"{{background}}","icon":"fa-magic","payload":"solved","payloadType":"str","topic":"","x":530,"y":1660,"wires":[["1b202ac0.d1f9f5","2ea9fd17.ab6352","21c17cf9.4d3f74"]]},{"id":"f01131fc.b32d6","type":"ui_switch","z":"c35904a3.a08f28","name":"sd1","label":"","tooltip":"","group":"e3d56fa7.f1697","order":50,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check  fa-2x","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":570,"y":1300,"wires":[[]]},{"id":"6fad9d89.78e5b4","type":"mqtt in","z":"c35904a3.a08f28","name":"","topic":"/client_66_err_pub","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":210,"y":1500,"wires":[["a26e18cb.cfec98","81792c63.7e7ee","84c8e972.eb02c8","34ce613f.edf00e","9317361.f509bc8"]]},{"id":"d65aea93.f5b758","type":"ui_switch","z":"c35904a3.a08f28","name":"sd2","label":"","tooltip":"","group":"e3d56fa7.f1697","order":51,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check  fa-2x","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":570,"y":1340,"wires":[[]]},{"id":"1ab48347.6c9c9d","type":"ui_switch","z":"c35904a3.a08f28","name":"sd3","label":"","tooltip":"","group":"e3d56fa7.f1697","order":53,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check  fa-2x","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":570,"y":1380,"wires":[[]]},{"id":"6e1e5746.729368","type":"ui_switch","z":"c35904a3.a08f28","name":"sd4","label":"","tooltip":"","group":"e3d56fa7.f1697","order":52,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check  fa-2x","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":570,"y":1420,"wires":[[]]},{"id":"ad85c7b2.b0ce28","type":"ui_switch","z":"c35904a3.a08f28","name":"sd5","label":"","tooltip":"","group":"e3d56fa7.f1697","order":54,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check  fa-2x","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":570,"y":1460,"wires":[[]]},{"id":"1b202ac0.d1f9f5","type":"ui_switch","z":"c35904a3.a08f28","name":"sdSolved","label":"","tooltip":"","group":"e3d56fa7.f1697","order":59,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"solved","onvalueType":"str","onicon":"fa-check  fa-2x","oncolor":"olivedrab","offvalue":"restarted","offvalueType":"str","officon":"fa-close","offcolor":"dimgrey","x":480,"y":1560,"wires":[[]]},{"id":"a26e18cb.cfec98","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 1){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":430,"y":1300,"wires":[["f01131fc.b32d6"]]},{"id":"9317361.f509bc8","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 8){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":430,"y":1340,"wires":[["d65aea93.f5b758"]]},{"id":"34ce613f.edf00e","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 2){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":430,"y":1380,"wires":[["1ab48347.6c9c9d"]]},{"id":"84c8e972.eb02c8","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 16){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":430,"y":1420,"wires":[["6e1e5746.729368"]]},{"id":"81792c63.7e7ee","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 4){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":430,"y":1460,"wires":[["ad85c7b2.b0ce28"]]},{"id":"b6715962.0ce188","type":"mqtt in","z":"c35904a3.a08f28","name":"","topic":"/client_66_pub","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":200,"y":1600,"wires":[["1b202ac0.d1f9f5","21c17cf9.4d3f74"]]},{"id":"13b5f03b.84476","type":"mqtt out","z":"c35904a3.a08f28","name":"","topic":"/client_66_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":680,"y":1720,"wires":[]},{"id":"2ea9fd17.ab6352","type":"function","z":"c35904a3.a08f28","name":"send SOLVE","func":"if(msg.payload == 'solved') {\n    msg.payload = 'solve';\n    return msg;\n}","outputs":1,"noerr":0,"x":490,"y":1720,"wires":[["13b5f03b.84476"]]},{"id":"62f3e77.602c718","type":"function","z":"c35904a3.a08f28","name":"restart","func":"msg.payload = 'restart'\nreturn msg;","outputs":1,"noerr":0,"x":190,"y":1740,"wires":[["af04930f.5583c"]]},{"id":"af04930f.5583c","type":"function","z":"c35904a3.a08f28","name":"restarted","func":"msg.payload = \"restarted\"\nreturn msg;","outputs":1,"noerr":0,"x":300,"y":1700,"wires":[["1b202ac0.d1f9f5"]]},{"id":"68fef384.41158c","type":"comment","z":"c35904a3.a08f28","name":"Shaker Double","info":"","x":200,"y":1300,"wires":[]},{"id":"ccc8997.6049668","type":"link in","z":"c35904a3.a08f28","name":"","links":["60656c9d.08dc34"],"x":95,"y":1740,"wires":[["62f3e77.602c718"]]},{"id":"30ceb66e.28846a","type":"ui_button","z":"aff38e5d.d751b","name":"UV bottles","group":"a210fd84.28e45","order":3,"width":4,"height":1,"passthru":false,"label":"UV bottles","tooltip":"","color":"silver","bgcolor":"","icon":"","payload":"true","payloadType":"bool","topic":"","x":110,"y":1880,"wires":[[]]},{"id":"6e37f8aa.75e468","type":"ui_button","z":"aff38e5d.d751b","name":"Wines Location","group":"a210fd84.28e45","order":6,"width":4,"height":1,"passthru":false,"label":"Wines Location","tooltip":"","color":"silver","bgcolor":"","icon":"","payload":"true","payloadType":"bool","topic":"","x":120,"y":2140,"wires":[[]]},{"id":"2a9477d8.0061b8","type":"ui_button","z":"aff38e5d.d751b","name":"Cellar Plan","group":"a210fd84.28e45","order":9,"width":4,"height":1,"passthru":false,"label":"Cellar Plan","tooltip":"","color":"silver","bgcolor":"","icon":"","payload":"true","payloadType":"bool","topic":"","x":110,"y":2360,"wires":[[]]},{"id":"96b43daa.29be1","type":"ui_button","z":"aff38e5d.d751b","name":"Coat of Arms","group":"a210fd84.28e45","order":12,"width":4,"height":1,"passthru":false,"label":"Coat of Arms","tooltip":"","color":"silver","bgcolor":"","icon":"","payload":"true","payloadType":"bool","topic":"","x":110,"y":2580,"wires":[[]]},{"id":"52aacfc3.1ae4d","type":"link in","z":"c35904a3.a08f28","name":"","links":["c4fcbd1b.83e16"],"x":1095,"y":1640,"wires":[["4c1c4bc8.07f934"]]},{"id":"4c1c4bc8.07f934","type":"function","z":"c35904a3.a08f28","name":"func_barrel_state","func":"if(msg.payload === true)\n{\n    msg.background = 0;\n    return msg;\n}\nelse if(msg.payload === false)\n{\n    msg.background = \"#FF0000\";\n    return msg;\n}","outputs":1,"noerr":0,"x":1250,"y":1640,"wires":[["20d4dc7d.a3d984"]]},{"id":"20d4dc7d.a3d984","type":"ui_button","z":"c35904a3.a08f28","name":"Barrel Cask S","group":"a210fd84.28e45","order":22,"width":3,"height":1,"passthru":false,"label":"Barrel","tooltip":"","color":"silver","bgcolor":"{{background}}","icon":"fa-magic","payload":"solved","payloadType":"str","topic":"","x":1480,"y":1640,"wires":[["e14ad9c1.4a7ec8","22a1084b.bf3b28","64e9102d.6adf4"]]},{"id":"465b1255.e10bec","type":"ui_switch","z":"c35904a3.a08f28","name":"bc1","label":"","tooltip":"","group":"a210fd84.28e45","order":15,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check ","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":1530,"y":1280,"wires":[[]]},{"id":"54d8e465.59594c","type":"mqtt in","z":"c35904a3.a08f28","name":"","topic":"/client_65_err_pub","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":1170,"y":1480,"wires":[["be142b7c.263f88","e9b948af.ca3f48","afa3001.de915","b49adbd7.d372f8"]]},{"id":"2895021.12d52fe","type":"ui_switch","z":"c35904a3.a08f28","name":"bc2","label":"","tooltip":"","group":"a210fd84.28e45","order":16,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":1530,"y":1320,"wires":[[]]},{"id":"57d25803.afbc78","type":"ui_switch","z":"c35904a3.a08f28","name":"bc3","label":"","tooltip":"","group":"a210fd84.28e45","order":17,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":1530,"y":1360,"wires":[[]]},{"id":"e373e76c.6e17f8","type":"ui_switch","z":"c35904a3.a08f28","name":"bc4","label":"","tooltip":"","group":"a210fd84.28e45","order":18,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-check","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-close","offcolor":"dimgrey","x":1530,"y":1400,"wires":[[]]},{"id":"e14ad9c1.4a7ec8","type":"ui_switch","z":"c35904a3.a08f28","name":"bcSolved","label":"","tooltip":"","group":"a210fd84.28e45","order":23,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"solved","onvalueType":"str","onicon":"fa-check  fa-2x","oncolor":"olivedrab","offvalue":"restarted","offvalueType":"str","officon":"fa-close","offcolor":"dimgrey","x":1440,"y":1520,"wires":[[]]},{"id":"be142b7c.263f88","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 1){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":1390,"y":1280,"wires":[["465b1255.e10bec"]]},{"id":"b49adbd7.d372f8","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 2){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":1390,"y":1320,"wires":[["2895021.12d52fe"]]},{"id":"afa3001.de915","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 4){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":1390,"y":1360,"wires":[["57d25803.afbc78"]]},{"id":"e9b948af.ca3f48","type":"function","z":"c35904a3.a08f28","name":"","func":"if(msg.payload & 8){\n    msg.payload = true\n}\nelse{\n    msg.payload = false\n}\nreturn msg;","outputs":1,"noerr":0,"x":1390,"y":1400,"wires":[["e373e76c.6e17f8"]]},{"id":"35b84cff.cdb374","type":"mqtt in","z":"c35904a3.a08f28","name":"","topic":"/client_65_pub","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":1160,"y":1580,"wires":[["e14ad9c1.4a7ec8","64e9102d.6adf4"]]},{"id":"3269a949.700a96","type":"mqtt out","z":"c35904a3.a08f28","name":"","topic":"/client_65_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":1640,"y":1700,"wires":[]},{"id":"22a1084b.bf3b28","type":"function","z":"c35904a3.a08f28","name":"send SOLVE","func":"if(msg.payload == 'solved') {\n    msg.payload = 'solve';\n    return msg;\n}","outputs":1,"noerr":0,"x":1450,"y":1700,"wires":[["3269a949.700a96"]]},{"id":"ebc687f6.3096a8","type":"function","z":"c35904a3.a08f28","name":"restart","func":"msg.payload = 'restart'\nreturn msg;","outputs":1,"noerr":0,"x":1150,"y":1720,"wires":[["d308f635.0b3108"]]},{"id":"d308f635.0b3108","type":"function","z":"c35904a3.a08f28","name":"restarted","func":"msg.payload = \"restarted\"\nreturn msg;","outputs":1,"noerr":0,"x":1260,"y":1680,"wires":[["e14ad9c1.4a7ec8"]]},{"id":"7908e484.14093c","type":"comment","z":"c35904a3.a08f28","name":"Barrel Cask","info":"","x":1150,"y":1280,"wires":[]},{"id":"19376567.550e2b","type":"link in","z":"c35904a3.a08f28","name":"","links":["60656c9d.08dc34"],"x":1055,"y":1720,"wires":[["ebc687f6.3096a8"]]},{"id":"c120a3ad.4473","type":"ui_button","z":"aff38e5d.d751b","name":"Sticks","group":"a210fd84.28e45","order":27,"width":4,"height":1,"passthru":false,"label":"Sticks","tooltip":"","color":"silver","bgcolor":"","icon":"","payload":"true","payloadType":"bool","topic":"","x":90,"y":3100,"wires":[[]]},{"id":"5dcb710f.c63f","type":"ui_button","z":"aff38e5d.d751b","name":"Map","group":"a210fd84.28e45","order":30,"width":4,"height":1,"passthru":false,"label":"Map","tooltip":"","color":"silver","bgcolor":"","icon":"","payload":"true","payloadType":"bool","topic":"","x":110,"y":3320,"wires":[[]]},{"id":"9ebd0dc6.87ce7","type":"function","z":"c35904a3.a08f28","name":"unlock wine rack","func":"if(msg.payload == 'solved') {\n    msg.payload = 341;\n    return msg;\n}","outputs":1,"noerr":0,"x":730,"y":860,"wires":[["c820d810.24d9d8","7764a42b.671e8c"]]},{"id":"38ee9e46.244302","type":"mqtt out","z":"c35904a3.a08f28","name":"","topic":"/main_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":1110,"y":920,"wires":[]},{"id":"f5249368.f9432","type":"function","z":"c35904a3.a08f28","name":"unlock table","func":"if(msg.payload == 'solved') {\n    msg.payload = 343;\n    return msg;\n}","outputs":1,"noerr":0,"x":1630,"y":980,"wires":[["c8f11ff1.c5d3b"]]},{"id":"819da247.c8931","type":"mqtt out","z":"c35904a3.a08f28","name":"","topic":"/main_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":2050,"y":980,"wires":[]},{"id":"3d131d7c.950cc2","type":"function","z":"c35904a3.a08f28","name":"unlock barrel wall","func":"fBarrel = global.get(\"isBarrelWallWin\") || 0;\nif(msg.payload == 'solved' && !fBarrel ) {\n    global.set(\"isBarrelWallWin\", true)\n    msg.payload = 347;\n    return msg;\n}","outputs":1,"noerr":0,"x":2470,"y":560,"wires":[["73b40a44.612f24","e233f218.5b00d","1fc5bf1b.16d271","9daf93a5.43aab","6b849b4f.fd1d24"]]},{"id":"f1468b29.f93058","type":"mqtt out","z":"c35904a3.a08f28","name":"","topic":"/main_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":3010,"y":660,"wires":[]},{"id":"64e9102d.6adf4","type":"function","z":"c35904a3.a08f28","name":"unlock barrel","func":"if(msg.payload == 'solved') {\n    msg.payload = true;\n    return msg;\n}","outputs":1,"noerr":0,"x":1610,"y":1580,"wires":[["423368d7.4136c8","53abd9d0.b8f628"]]},{"id":"7189abf8.ea9b14","type":"mqtt out","z":"c35904a3.a08f28","name":"","topic":"/main_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":2210,"y":1580,"wires":[]},{"id":"21c17cf9.4d3f74","type":"function","z":"c35904a3.a08f28","name":"True","func":"if(msg.payload == 'solved') {\n    msg.payload = true;\n    return msg;\n}","outputs":1,"noerr":0,"x":730,"y":1620,"wires":[["aa9900e8.85107","d384cf9d.88046","d5caa537.7bb9b8","b0a6bc49.0f09f"]]},{"id":"5ac8fcd9.be69e4","type":"mqtt out","z":"c35904a3.a08f28","name":"","topic":"/main_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":770,"y":1320,"wires":[]},{"id":"a7cf8e80.b750f","type":"trigger","z":"c35904a3.a08f28","op1":"345","op2":"344","op1type":"str","op2type":"str","duration":"800","extend":false,"units":"ms","reset":"","bytopic":"all","name":"unlock & lock barrel","x":2010,"y":1580,"wires":[["7189abf8.ea9b14"]]},{"id":"82167047.e350e","type":"mqtt in","z":"a469dc94.42301","name":"","topic":"/client_67_batt_pub","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":1350,"y":3520,"wires":[["39c24b9c.f27734"]]},{"id":"39c24b9c.f27734","type":"ui_text","z":"a469dc94.42301","group":"a595604c.cb85a","order":4,"width":0,"height":0,"name":"","label":"LAMP battery","format":"{{msg.payload}}","layout":"row-spread","x":1700,"y":3520,"wires":[]},{"id":"4a3c4fe4.86176","type":"comment","z":"a469dc94.42301","name":"LAMP battery level","info":"","x":1330,"y":3440,"wires":[]},{"id":"941e4bdc.64c0b8","type":"mqtt out","z":"a469dc94.42301","name":"","topic":"/client_67_sub","qos":"0","retain":"false","broker":"b7b72d02.5032c","x":820,"y":1380,"wires":[]},{"id":"be5a1c20.d4eab","type":"delay","z":"a469dc94.42301","name":"","pauseType":"delay","timeout":"15","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":630,"y":1380,"wires":[["941e4bdc.64c0b8"]]},{"id":"e54b68df.ca0fd8","type":"ui_switch","z":"a469dc94.42301","name":"link Lamp","label":"","tooltip":"","group":"f7e87146.ea8df","order":15,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-link fa-2x","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-unlink fa-2x","offcolor":"orangered","x":1000,"y":3560,"wires":[[]]},{"id":"578cb291.29674c","type":"comment","z":"a469dc94.42301","name":"link state Lamp Wall","info":"","x":250,"y":3380,"wires":[]},{"id":"f56b0c8f.63b45","type":"mqtt in","z":"a469dc94.42301","name":"","topic":"/client_67_pub","qos":"0","datatype":"auto","broker":"b7b72d02.5032c","x":240,"y":3540,"wires":[["cba02d68.00d29"]]},{"id":"34f8af2d.09884","type":"ui_text","z":"a469dc94.42301","group":"f7e87146.ea8df","order":14,"width":7,"height":1,"name":"link state: client_67(Lamp)","label":"client_67(Lamp): ","format":"{{msg.text}}","layout":"row-right","x":1060,"y":3520,"wires":[]},{"id":"9203c0a7.8e03c","type":"inject","z":"a469dc94.42301","name":"","topic":"","payload":"30","payloadType":"str","repeat":"6","crontab":"","once":true,"onceDelay":"2.8","x":230,"y":3440,"wires":[["6ba7d6d3.7f3e08"]]},{"id":"5b63f3fb.d63a5c","type":"mqtt out","z":"a469dc94.42301","name":"","topic":"/client_67_sub","qos":"0","retain":"false","broker":"b7b72d02.5032c","x":800,"y":3440,"wires":[]},{"id":"2325dbd5.67f274","type":"function","z":"a469dc94.42301","name":"check_link_f","func":"var link_counter = flow.get('link_counter_f') || 0;\n\nif(msg.payload == \"30\")\n{\n    link_counter = (link_counter < 2) ? link_counter + 1 : 2;\n}\n\nif(msg.payload == \"31\")\n{\n    link_counter = 0;\n}\n\nflow.set('link_counter_f', link_counter);\nmsg.link = link_counter;\n\nif(link_counter <= 1)\n{\n    msg.payload = true;\n    msg.text = \"on-line\";\n    return msg;\n}\nelse\n{\n    msg.payload = false;\n    msg.text = \"off-line\";\n    return msg;\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":3540,"wires":[["34f8af2d.09884","e54b68df.ca0fd8","96b2e793.4e9ca8"]]},{"id":"cba02d68.00d29","type":"delay","z":"a469dc94.42301","name":"","pauseType":"delay","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":570,"y":3540,"wires":[["2325dbd5.67f274"]]},{"id":"946042fa.37203","type":"link in","z":"a469dc94.42301","name":"","links":["d35949cd.0cb588"],"x":675,"y":3480,"wires":[["5b63f3fb.d63a5c","2325dbd5.67f274"]]},{"id":"96b2e793.4e9ca8","type":"link out","z":"a469dc94.42301","name":"Lamp_link_state","links":["2af4f93e.f911d6"],"x":975,"y":3640,"wires":[]},{"id":"6ba7d6d3.7f3e08","type":"delay","z":"a469dc94.42301","name":"","pauseType":"random","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"300","randomLast":"700","randomUnits":"milliseconds","drop":false,"x":480,"y":3440,"wires":[["5b63f3fb.d63a5c","2325dbd5.67f274"]]},{"id":"6279ff82.ed27d","type":"mqtt in","z":"c35904a3.a08f28","name":"","topic":"/client_67_state_pub","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":170,"y":2040,"wires":[["b7feecd3.31d29","26c1cc15.041c74","ed63b37b.1307e","e08f6939.29f868"]]},{"id":"26c1cc15.041c74","type":"ui_switch","z":"c35904a3.a08f28","name":"lampLight","label":"","tooltip":"","group":"89e5900e.1cfcc","order":14,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"light_on","onvalueType":"str","onicon":"fa-lightbulb-o fa-2x","oncolor":"gold","offvalue":"light_off","offvalueType":"str","officon":"fa-lightbulb-o fa-2x","offcolor":"silver","x":420,"y":2100,"wires":[[]]},{"id":"f84ba779.ef21c8","type":"ui_button","z":"c35904a3.a08f28","name":"LAMP","group":"89e5900e.1cfcc","order":12,"width":"2","height":1,"passthru":false,"label":"LAMP","tooltip":"","color":"silver","bgcolor":"{{background}}","icon":"fa-magic","payload":"","payloadType":"str","topic":"","x":530,"y":2240,"wires":[[]]},{"id":"b7feecd3.31d29","type":"ui_switch","z":"c35904a3.a08f28","name":"lampPlaced","label":"","tooltip":"","group":"89e5900e.1cfcc","order":13,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"hall_on","onvalueType":"str","onicon":"fa-dot-circle-o fa-2x","oncolor":"olivedrab","offvalue":"hall_off","offvalueType":"str","officon":"fa-circle-o","offcolor":"dimgrey","x":430,"y":2020,"wires":[[]]},{"id":"d921faeb.314f88","type":"comment","z":"c35904a3.a08f28","name":"Lamp","info":"","x":170,"y":1940,"wires":[]},{"id":"b6238a67.082e68","type":"link in","z":"c35904a3.a08f28","name":"","links":["52a32de3.012664"],"x":995,"y":2040,"wires":[["97456820.21f3a8"]]},{"id":"97456820.21f3a8","type":"function","z":"c35904a3.a08f28","name":"func_urn_state","func":"if(msg.payload === true)\n{\n    msg.background = 0;\n    return msg;\n}\nelse if(msg.payload === false)\n{\n    msg.background = \"#FF0000\";\n    return msg;\n}","outputs":1,"noerr":0,"x":1120,"y":2040,"wires":[["1ab41078.8b112"]]},{"id":"1ab41078.8b112","type":"ui_button","z":"c35904a3.a08f28","name":"Urn","group":"a210fd84.28e45","order":46,"width":2,"height":1,"passthru":false,"label":"Urn","tooltip":"","color":"silver","bgcolor":"{{background}}","icon":"fa-magic","payload":"solved","payloadType":"str","topic":"","x":1310,"y":2040,"wires":[["cd86703.45dab9","5890da82.53b574","49afda17.57ec84"]]},{"id":"cd86703.45dab9","type":"ui_switch","z":"c35904a3.a08f28","name":"urn_Solved","label":"","tooltip":"","group":"a210fd84.28e45","order":48,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"solved","onvalueType":"str","onicon":"fa-check  fa-2x","oncolor":"olivedrab","offvalue":"restarted","offvalueType":"str","officon":"fa-close","offcolor":"dimgrey","x":1710,"y":1980,"wires":[[]]},{"id":"dfe45b93.306b48","type":"mqtt in","z":"c35904a3.a08f28","name":"","topic":"/client_68_pub","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":1080,"y":1960,"wires":[["cd86703.45dab9","49afda17.57ec84","5210865a.8c2868"]]},{"id":"c7a2ae29.76537","type":"mqtt out","z":"c35904a3.a08f28","name":"","topic":"/client_68_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":1660,"y":2140,"wires":[]},{"id":"5890da82.53b574","type":"function","z":"c35904a3.a08f28","name":"send SOLVE","func":"if(msg.payload == 'solved') {\n    msg.payload = 'solve';\n    return msg;\n}","outputs":1,"noerr":0,"x":1450,"y":2140,"wires":[["c7a2ae29.76537"]]},{"id":"4da2f1a5.d3f21","type":"function","z":"c35904a3.a08f28","name":"restart","func":"msg.payload = 'restart'\nreturn msg;","outputs":1,"noerr":0,"x":1090,"y":2180,"wires":[["d363fd8c.d0544"]]},{"id":"d363fd8c.d0544","type":"function","z":"c35904a3.a08f28","name":"restarted","func":"msg.payload = \"restarted\"\nreturn msg;","outputs":1,"noerr":0,"x":1240,"y":2100,"wires":[["cd86703.45dab9"]]},{"id":"17f4b513.53f81b","type":"link in","z":"c35904a3.a08f28","name":"","links":["60656c9d.08dc34"],"x":955,"y":2180,"wires":[["4da2f1a5.d3f21"]]},{"id":"49afda17.57ec84","type":"function","z":"c35904a3.a08f28","name":"if_solved_then","func":"if(msg.payload == 'solved') {\n    msg.payload = true;\n    return msg;\n}","outputs":1,"noerr":0,"x":1320,"y":1920,"wires":[["5916959d.3ed51c"]]},{"id":"5916959d.3ed51c","type":"python-function","z":"c35904a3.a08f28","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/EN/Outro.mp3\"\nplayer1 = Popen(['omxplayer', track1])\n","outputs":1,"x":1540,"y":1920,"wires":[[]]},{"id":"97933e95.9d284","type":"delay","z":"a469dc94.42301","name":"","pauseType":"delay","timeout":"17","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":630,"y":1420,"wires":[["4f48f586.0199fc"]]},{"id":"4f48f586.0199fc","type":"mqtt out","z":"a469dc94.42301","name":"","topic":"/client_68_sub","qos":"0","retain":"false","broker":"b7b72d02.5032c","x":820,"y":1420,"wires":[]},{"id":"17edce47.f6aa92","type":"ui_switch","z":"a469dc94.42301","name":"link Urn","label":"","tooltip":"","group":"f7e87146.ea8df","order":17,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-link fa-2x","oncolor":"olivedrab","offvalue":"false","offvalueType":"bool","officon":"fa-unlink fa-2x","offcolor":"orangered","x":1000,"y":3880,"wires":[[]]},{"id":"a78eb56e.268568","type":"comment","z":"a469dc94.42301","name":"link state Urn","info":"","x":230,"y":3700,"wires":[]},{"id":"3ad77f16.2de0c","type":"mqtt in","z":"a469dc94.42301","name":"","topic":"/client_68_pub","qos":"0","datatype":"auto","broker":"b7b72d02.5032c","x":240,"y":3860,"wires":[["1201dc89.806953"]]},{"id":"4391cbbe.4d0cf4","type":"ui_text","z":"a469dc94.42301","group":"f7e87146.ea8df","order":16,"width":7,"height":1,"name":"link state: client_68(Urn)","label":"client_68(Urn): ","format":"{{msg.text}}","layout":"row-right","x":1050,"y":3840,"wires":[]},{"id":"47564fb.63645b","type":"inject","z":"a469dc94.42301","name":"","topic":"","payload":"30","payloadType":"str","repeat":"5","crontab":"","once":true,"onceDelay":"4.8","x":230,"y":3760,"wires":[["6445b45a.c435cc"]]},{"id":"4a36e87.8b20f18","type":"mqtt out","z":"a469dc94.42301","name":"","topic":"/client_68_sub","qos":"0","retain":"false","broker":"b7b72d02.5032c","x":800,"y":3760,"wires":[]},{"id":"52ebaca5.2861b4","type":"function","z":"a469dc94.42301","name":"check_link_j","func":"var link_counter = flow.get('link_counter_j') || 0;\n\nif(msg.payload == \"30\")\n{\n    link_counter = (link_counter < 2) ? link_counter + 1 : 2;\n}\n\nif(msg.payload == \"31\")\n{\n    link_counter = 0;\n}\n\nflow.set('link_counter_j', link_counter);\nmsg.link = link_counter;\n\nif(link_counter <= 1)\n{\n    msg.payload = true;\n    msg.text = \"on-line\";\n    return msg;\n}\nelse\n{\n    msg.payload = false;\n    msg.text = \"off-line\";\n    return msg;\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":3860,"wires":[["4391cbbe.4d0cf4","17edce47.f6aa92","d3b682b6.ccb53"]]},{"id":"1201dc89.806953","type":"delay","z":"a469dc94.42301","name":"","pauseType":"delay","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":570,"y":3860,"wires":[["52ebaca5.2861b4"]]},{"id":"9ae72fb4.8018a","type":"link in","z":"a469dc94.42301","name":"","links":["d35949cd.0cb588"],"x":675,"y":3800,"wires":[["4a36e87.8b20f18","52ebaca5.2861b4"]]},{"id":"d3b682b6.ccb53","type":"link out","z":"a469dc94.42301","name":"link_state_urn","links":[],"x":975,"y":3960,"wires":[]},{"id":"6445b45a.c435cc","type":"delay","z":"a469dc94.42301","name":"","pauseType":"random","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"300","randomLast":"700","randomUnits":"milliseconds","drop":false,"x":480,"y":3760,"wires":[["4a36e87.8b20f18","52ebaca5.2861b4"]]},{"id":"ee3785eb.3f7808","type":"ui_switch","z":"c35904a3.a08f28","name":"sens_urn","label":"","tooltip":"","group":"a210fd84.28e45","order":47,"width":1,"height":1,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"detected","onvalueType":"str","onicon":"fa-dot-circle-o fa-2x","oncolor":"olivedrab","offvalue":"not detected","offvalueType":"str","officon":"fa-circle-o","offcolor":"dimgrey","x":1420,"y":1840,"wires":[[]]},{"id":"9092cf98.5bee7","type":"mqtt in","z":"c35904a3.a08f28","name":"","topic":"/client_68_state_pub","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":1110,"y":1840,"wires":[["ee3785eb.3f7808"]]},{"id":"ed63b37b.1307e","type":"debug","z":"c35904a3.a08f28","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":520,"y":1840,"wires":[]},{"id":"5210865a.8c2868","type":"debug","z":"c35904a3.a08f28","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1270,"y":1800,"wires":[]},{"id":"8b911222.f6509","type":"mqtt out","z":"c35904a3.a08f28","name":"","topic":"/client_68_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":3000,"y":480,"wires":[]},{"id":"73b40a44.612f24","type":"function","z":"c35904a3.a08f28","name":"activate urn","func":"msg.payload = 'activate'\nreturn msg;","outputs":1,"noerr":0,"x":2690,"y":480,"wires":[["8b911222.f6509"]]},{"id":"5b9d9942.69f3f8","type":"ui_button","z":"c35904a3.a08f28","name":"ON","group":"89e5900e.1cfcc","order":10,"width":"1","height":1,"passthru":false,"label":"ON","tooltip":"","color":"silver","bgcolor":"","icon":"","payload":"light_on","payloadType":"str","topic":"","x":170,"y":2360,"wires":[["249f6441.32adfc"]]},{"id":"3d1914c8.d2d9fc","type":"ui_button","z":"c35904a3.a08f28","name":"OFF","group":"89e5900e.1cfcc","order":11,"width":"1","height":1,"passthru":false,"label":"OFF","tooltip":"","color":"silver","bgcolor":"","icon":"","payload":"light_off","payloadType":"str","topic":"","x":170,"y":2400,"wires":[["249f6441.32adfc"]]},{"id":"249f6441.32adfc","type":"mqtt out","z":"c35904a3.a08f28","name":"","topic":"/client_67_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":390,"y":2380,"wires":[]},{"id":"e08f6939.29f868","type":"function","z":"c35904a3.a08f28","name":"func_lamp_state","func":"if(msg.payload === true)\n{\n    msg.background = 0;\n    return msg;\n}\nelse if(msg.payload === false)\n{\n    msg.background = \"#FF0000\";\n    return msg;\n}\nelse if(msg.payload == \"batteryLow\")\n{\n    msg.background = \"#aa7700\";\n    return msg;\n}","outputs":1,"noerr":0,"x":340,"y":2240,"wires":[["f84ba779.ef21c8"]]},{"id":"2af4f93e.f911d6","type":"link in","z":"c35904a3.a08f28","name":"","links":["96b2e793.4e9ca8"],"x":135,"y":2240,"wires":[["e08f6939.29f868"]]},{"id":"e233f218.5b00d","type":"function","z":"c35904a3.a08f28","name":"light urn ON","func":"msg.payload = \"light_bottle_150\";\nreturn msg;","outputs":1,"noerr":0,"x":2610,"y":660,"wires":[["c77a4380.7e2a4"]]},{"id":"d384cf9d.88046","type":"delay","z":"c35904a3.a08f28","name":"","pauseType":"delay","timeout":"1500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":920,"y":1500,"wires":[["1bcdbd.b9780243"]]},{"id":"1bcdbd.b9780243","type":"function","z":"c35904a3.a08f28","name":"gerbs on","func":"\nmsg.payload = \"light_gerbs_255\";\nreturn msg;\n","outputs":1,"noerr":0,"x":1000,"y":1560,"wires":[["5ac8fcd9.be69e4"]]},{"id":"d5caa537.7bb9b8","type":"delay","z":"c35904a3.a08f28","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":1260,"wires":[["3afe0e1.69e8ef2"]]},{"id":"3afe0e1.69e8ef2","type":"function","z":"c35904a3.a08f28","name":"light on","func":"if(msg.payload === true) {\n    msg.payload = \"light_lamp_room_11_12_110\";\n    return msg;\n}","outputs":1,"noerr":0,"x":1100,"y":1420,"wires":[["5ac8fcd9.be69e4"]]},{"id":"a8876338.12644","type":"inject","z":"79af85de.53d17c","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":1070,"y":460,"wires":[["de517bf2.f268b8"]]},{"id":"3e6abeb5.150e32","type":"ui_button","z":"a469dc94.42301","name":"write1","group":"98367be2.803378","order":4,"width":2,"height":1,"passthru":false,"label":"write","tooltip":"","color":"silver","bgcolor":"","icon":"","payload":"0","payloadType":"str","topic":"","x":870,"y":660,"wires":[["d68ee703.cb9b58"]]},{"id":"7aacac57.e01704","type":"ui_button","z":"a469dc94.42301","name":"write2","group":"98367be2.803378","order":6,"width":2,"height":1,"passthru":false,"label":"write","tooltip":"","color":"silver","bgcolor":"","icon":"","payload":"1","payloadType":"str","topic":"","x":870,"y":700,"wires":[["d68ee703.cb9b58"]]},{"id":"7cc321e7.8e94c","type":"ui_button","z":"a469dc94.42301","name":"write3","group":"98367be2.803378","order":8,"width":2,"height":1,"passthru":false,"label":"write","tooltip":"","color":"silver","bgcolor":"","icon":"","payload":"2","payloadType":"str","topic":"","x":870,"y":740,"wires":[["d68ee703.cb9b58"]]},{"id":"55cec6a7.ecc1a8","type":"ui_button","z":"a469dc94.42301","name":"write4","group":"98367be2.803378","order":10,"width":2,"height":1,"passthru":false,"label":"write","tooltip":"","color":"silver","bgcolor":"","icon":"","payload":"3","payloadType":"str","topic":"","x":870,"y":780,"wires":[["d68ee703.cb9b58"]]},{"id":"373c3c3d.2c6394","type":"ui_button","z":"a469dc94.42301","name":"write5","group":"98367be2.803378","order":12,"width":2,"height":1,"passthru":false,"label":"write","tooltip":"","color":"silver","bgcolor":"","icon":"","payload":"4","payloadType":"str","topic":"","x":870,"y":820,"wires":[["d68ee703.cb9b58"]]},{"id":"4fadb05b.6f49b","type":"ui_button","z":"a469dc94.42301","name":"write6","group":"98367be2.803378","order":14,"width":2,"height":1,"passthru":false,"label":"write","tooltip":"","color":"silver","bgcolor":"","icon":"","payload":"5","payloadType":"str","topic":"","x":870,"y":860,"wires":[["d68ee703.cb9b58"]]},{"id":"d68ee703.cb9b58","type":"mqtt out","z":"a469dc94.42301","name":"","topic":"/client_64_setRfid","qos":"","retain":"","broker":"b7b72d02.5032c","x":1130,"y":760,"wires":[]},{"id":"aa9900e8.85107","type":"function","z":"c35904a3.a08f28","name":"light_off","func":"if(msg.payload === true){\n    msg.payload = \"light_lamp_room_11_12_0\";\n    return msg;\n}\n","outputs":1,"noerr":0,"x":740,"y":1460,"wires":[["5ac8fcd9.be69e4"]]},{"id":"7565890f.bedc78","type":"mqtt in","z":"a469dc94.42301","name":"","topic":"/client_64_err_combo","qos":"2","datatype":"auto","broker":"b7b72d02.5032c","x":360,"y":940,"wires":[["e634b821.1f9888","1b8ff821.b79978"]]},{"id":"e634b821.1f9888","type":"function","z":"a469dc94.42301","name":"","func":"if(msg.payload == \"SET_OK\")   {\n    msg.background = \"#006600\";\n}\nelse if(msg.payload == \"SET_FAIL\") {\n    msg.background = \"#ff0000\";\n}\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":900,"wires":[["b4069169.8d21c"]]},{"id":"b4069169.8d21c","type":"ui_button","z":"a469dc94.42301","name":"writeStatus","group":"98367be2.803378","order":15,"width":"6","height":1,"passthru":false,"label":"{{msg.payload}}","tooltip":"","color":"silver","bgcolor":"{{background}}","icon":"","payload":"0","payloadType":"str","topic":"","x":790,"y":940,"wires":[[]]},{"id":"1b8ff821.b79978","type":"delay","z":"a469dc94.42301","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":500,"y":1000,"wires":[["8a3ddf42.f4b3d"]]},{"id":"8a3ddf42.f4b3d","type":"function","z":"a469dc94.42301","name":"","func":"\n    msg.background = \"#666666\";\n    msg.payload = \"\";\nreturn msg;","outputs":1,"noerr":0,"x":650,"y":1000,"wires":[["b4069169.8d21c"]]},{"id":"c820d810.24d9d8","type":"python-function","z":"c35904a3.a08f28","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/mechanical unlock.mp3\"\n\nplayer1 = Popen(['omxplayer', track1])\n","outputs":1,"x":1120,"y":860,"wires":[[]]},{"id":"b0a6bc49.0f09f","type":"python-function","z":"c35904a3.a08f28","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/coats of arms activation.mp3\"\n\nplayer1 = Popen(['omxplayer', track1])\n","outputs":1,"x":900,"y":1760,"wires":[[]]},{"id":"423368d7.4136c8","type":"python-function","z":"c35904a3.a08f28","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/mechanical unlock.mp3\"\n\nplayer1 = Popen(['omxplayer', track1])\n","outputs":1,"x":1800,"y":1480,"wires":[[]]},{"id":"1fc5bf1b.16d271","type":"python-function","z":"c35904a3.a08f28","name":"mp3_win","func":"import os\nimport sys\nfrom subprocess import Popen\n\ntrack1 = \"/media/pi/MP3/GAME/mechanical unlock.mp3\"\n\nplayer1 = Popen(['omxplayer', track1])\n","outputs":1,"x":3020,"y":560,"wires":[[]]},{"id":"c8f11ff1.c5d3b","type":"delay","z":"c35904a3.a08f28","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1830,"y":980,"wires":[["819da247.c8931"]]},{"id":"7764a42b.671e8c","type":"delay","z":"c35904a3.a08f28","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":930,"y":920,"wires":[["38ee9e46.244302"]]},{"id":"c77a4380.7e2a4","type":"delay","z":"c35904a3.a08f28","name":"","pauseType":"delay","timeout":"5000","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2800,"y":660,"wires":[["f1468b29.f93058"]]},{"id":"9daf93a5.43aab","type":"delay","z":"c35904a3.a08f28","name":"","pauseType":"delay","timeout":"2500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2740,"y":600,"wires":[["f1468b29.f93058"]]},{"id":"12bfe5cb.4e1b6a","type":"function","z":"ed820623.bf0ea8","name":"send RESTART to clients","func":"msg.payload = \"restart\";\nreturn msg;","outputs":1,"noerr":0,"x":770,"y":700,"wires":[["45d3032b.96112c","e8bea37f.bc1dd","d09648fc.26e5f8","e905c7a2.715a38","c0164ff3.4ba26","439f182d.bc0298"]]},{"id":"45d3032b.96112c","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"50","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1070,"y":620,"wires":[["9e95036f.6eaa"]]},{"id":"e8bea37f.bc1dd","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1070,"y":660,"wires":[["38617ece.8bd8e2"]]},{"id":"d09648fc.26e5f8","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"150","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1070,"y":700,"wires":[["a1adf60f.1203b8"]]},{"id":"e905c7a2.715a38","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1070,"y":740,"wires":[["a7977c7d.0fd96"]]},{"id":"c0164ff3.4ba26","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1070,"y":780,"wires":[["e2ca97c9.fd7278"]]},{"id":"9e95036f.6eaa","type":"mqtt out","z":"ed820623.bf0ea8","name":"","topic":"/client_62_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":1278,"y":620,"wires":[]},{"id":"38617ece.8bd8e2","type":"mqtt out","z":"ed820623.bf0ea8","name":"","topic":"/client_63_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":1280,"y":660,"wires":[]},{"id":"a1adf60f.1203b8","type":"mqtt out","z":"ed820623.bf0ea8","name":"","topic":"/client_64_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":1280,"y":700,"wires":[]},{"id":"a7977c7d.0fd96","type":"mqtt out","z":"ed820623.bf0ea8","name":"","topic":"/client_65_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":1280,"y":740,"wires":[]},{"id":"e2ca97c9.fd7278","type":"mqtt out","z":"ed820623.bf0ea8","name":"","topic":"/client_66_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":1280,"y":780,"wires":[]},{"id":"b72a75e5.384f08","type":"mqtt out","z":"ed820623.bf0ea8","name":"","topic":"/client_68_sub","qos":"","retain":"","broker":"b7b72d02.5032c","x":1280,"y":820,"wires":[]},{"id":"439f182d.bc0298","type":"delay","z":"ed820623.bf0ea8","name":"","pauseType":"delay","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1070,"y":820,"wires":[["b72a75e5.384f08"]]},{"id":"6b849b4f.fd1d24","type":"debug","z":"c35904a3.a08f28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2990,"y":360,"wires":[]},{"id":"53abd9d0.b8f628","type":"delay","z":"c35904a3.a08f28","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1810,"y":1580,"wires":[["a7cf8e80.b750f"]]}]